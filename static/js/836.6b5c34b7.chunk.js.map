{"version":3,"file":"static/js/836.6b5c34b7.chunk.js","mappings":"2QA8BaA,EAAc,SACzBC,EACAC,EACAC,GAEA,IAAMC,EAAyC,GAyB/C,OAvBAF,EAAQG,SAAQ,SAACC,GACfA,EAAKC,MAAM,IAAIF,SAAQ,SAACG,EAAQC,GAC9B,OAAKR,EAASS,SAASF,GAKnBA,IAAWP,EAASQ,GAEdL,EAAQI,GAAU,UAGJ,YAApBJ,EAAQI,GAEFJ,EAAQI,GAAU,eAF5B,EARUJ,EAAQI,GAAU,eAetB,OAAVL,QAAU,IAAVA,GAAAA,EAAYE,SAAQ,SAACG,GACK,YAApBJ,EAAQI,KAAuBJ,EAAQI,GAAU,YAGhDJ,G,sCC/CIO,EAAO,SAAC,GAA8E,IAA5EC,EAA2E,EAA3EA,MAAOC,EAAoE,EAApEA,OAAoE,IAA5DC,KAAAA,OAA4D,MAArD,QAAqD,MAA5CC,KAAAA,OAA4C,MAArC,KAAqC,MAA/BC,UAAAA,OAA+B,SAC1FC,GAAmBC,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASH,oBAEpEI,EAAUC,GAAAA,CACd,8GACA,CACE,qEAAsET,EACtE,+EAAyF,UAATC,IAAqBD,IAAWI,EAChH,iFAA2F,UAATH,IAAqBD,GAAUI,EACjH,qFAA+F,WAATH,IAAsBD,EAC5G,mFAA+F,WAAXA,EACpF,2CAAuD,YAAXA,IAAyBI,EACrE,6CAAyD,YAAXJ,GAAwBI,EACtE,uFACa,YAAXJ,IAAyBI,EAC3B,yCAAqD,YAAXJ,GAAwBI,EAClE,oBAA8B,OAATF,EACrB,kBAA4B,OAATA,EACnB,oBAAqBC,IAIzB,OACE,+BACE,gBAAKO,UAAWF,EAAhB,SAA0BT,OC5BnBY,EAAe,SAAC,GAA6C,IAA3CvB,EAA0C,EAA1CA,SAAUwB,EAAgC,EAAhCA,MAAgC,IAAzBV,KAAAA,OAAyB,MAAlB,KAAkB,EACjEW,EFqDwB,SAACzB,EAAkBwB,GACjD,IAAME,EAAgB1B,EAASM,MAAM,IAC/BqB,EAAaH,EAAMlB,MAAM,IAEzBsB,EAAqBF,EAAcG,KAAI,SAACC,GAAD,OAAO,KAE9CL,EAAyBM,MAAMC,KAAKD,MAAMP,EAAMS,SAmCtD,OAhCAN,EAAWvB,SAAQ,SAACG,EAAQC,GAC1B,GAAID,IAAWmB,EAAclB,GAG3B,OAFAiB,EAASjB,GAAK,eACdoB,EAAmBpB,IAAK,MAK5BmB,EAAWvB,SAAQ,SAACG,EAAQC,GAC1B,IAAIiB,EAASjB,GAAb,CAEA,GAAKkB,EAAcjB,SAASF,GAA5B,CAOA,IAAM2B,EAAqBR,EAAcS,WACvC,SAACC,EAAGC,GAAJ,OAAcD,IAAM7B,IAAWqB,EAAmBS,MAGpD,OAAIH,GAAsB,GACxBT,EAASjB,GAAK,eACdoB,EAAmBM,IAAsB,SAGzCT,EAASjB,GAAK,UAddiB,EAASjB,GAAK,aAmBXiB,EE9FUa,CAAiBtC,EAAUwB,GAE5C,OACE,gBAAKF,UAAU,2BAAf,SACGE,EAAMlB,MAAM,IAAIuB,KAAI,SAACtB,EAAQC,GAAT,OACnB,SAACE,EAAD,CAAcC,MAAOJ,EAAQK,OAAQa,EAASjB,GAAIM,KAAMA,GAA7CN,SCLN+B,EAA8B,SAAC,GAIrC,IAHLf,EAGI,EAHJA,MACAxB,EAEI,EAFJA,SACAwC,EACI,EADJA,aAEA,GAA0CvB,EAAAA,EAAAA,KACxC,SAACC,GAAD,OAAsBA,EAAMuB,aADtBC,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,gBAItB,GAAI3C,EAASiC,OAAST,EAAMS,OAAS,EAAG,OAAO,KAE/C,IAAMN,EAAaH,EAAMlB,MAAM,IACzBsC,EAAab,MAAMC,KAAKD,MAAM/B,EAASiC,OAASN,EAAWM,SAC3DY,EAAclB,EAAWM,OAEzBa,EAAY,SAACT,GAAD,OAChBV,EAAWU,IAAUK,EAAaL,IAAUM,EAAgBN,IAExDU,EAAU,SAACV,GACf,OAAIV,EAAWU,GAAe,QAC1BK,EAAaL,GAAe,QAC5BM,EAAgBN,GAAe,cAAnC,GAGF,OACE,iBAAKf,UAAU,2BAAf,UACGK,EAAWE,KAAI,SAACC,EAAGtB,GAAJ,OACd,SAACE,EAAD,CAEEC,MAAOmC,EAAUtC,GACjBK,KAAMkC,EAAQvC,GACdO,UAAWP,IAAMgC,GAHZhC,MAMRoC,EAAWf,KAAI,SAACC,EAAGtB,GAAJ,OACd,SAACE,EAAD,CAEEC,MAAOmC,EAAUtC,EAAIqC,GACrBhC,KAAMkC,EAAQvC,EAAIqC,GAClB9B,UAAWP,EAAIqC,IAAgBL,GAH1BhC,UCvCFwC,EAA4B,SAAC,GAA+B,IAA7BhD,EAA4B,EAA5BA,SAA4B,IAAlBc,KAAAA,OAAkB,MAAX,KAAW,EAChE8B,EAAab,MAAMC,KAAKD,MAAM/B,EAASiC,SAE7C,OACE,gBAAKX,UAAU,2BAAf,SACGsB,EAAWf,KAAI,SAACC,EAAGtB,GAAJ,OACd,SAACE,EAAD,CAAcI,KAAMA,GAATN,SCDNyC,EAAO,SAAC,GAA8D,IAA5DjD,EAA2D,EAA3DA,SAAUC,EAAiD,EAAjDA,QAASiD,EAAwC,EAAxCA,aAAcV,EAA0B,EAA1BA,aAIhDW,IAHSC,EAAAA,EAAAA,MAIbnD,EAAQgC,OAAS,EAAIF,MAAMC,KAAKD,MAAM,EAAI9B,EAAQgC,SAAW,IAE/D,OACE,iBAAKX,UAAU,OAAf,UACGrB,EAAQ4B,KAAI,SAACL,EAAOhB,GAAR,OACX,SAACe,EAAD,CAAsBC,MAAOA,EAAOxB,SAAUA,GAA3BQ,MAEpBP,EAAQgC,OAAS,IAChB,SAACM,EAAD,CAAYf,MAAO0B,EAAclD,SAAUA,EAAUwC,aAAcA,IAEpEW,EAAQtB,KAAI,SAACC,EAAGtB,GAAJ,OACX,SAACwC,EAAD,CAAkBhD,SAAUA,GAAbQ,UCZV6C,EAAM,SAAC,GAON,IANZC,EAMW,EANXA,SACA1C,EAKW,EALXA,OACA2C,EAIW,EAJXA,cAIW,IAHXzC,KAAAA,OAGW,MAHJ,KAGI,EAFXH,EAEW,EAFXA,MAEW,IADX6C,QAAAA,OACW,MADD,aACC,EACLxC,GAAmBC,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASH,oBAEpEI,EAAUC,GAAAA,CACd,gHADwB,uBAERP,EAFQ,gBAGxB,CACE,yEAA0EF,EAC1E,0BAAsC,WAAXA,EAC3B,mFACa,YAAXA,IAAyBI,EAC3B,uFACa,YAAXJ,IAAyBI,EAC3B,uFACa,YAAXJ,GAAwBI,EAC1B,+EACa,YAAXJ,GAAwBI,EAC1B,kBAAmBJ,GAA4B,WAAlB2C,EAC7B,kBAA8B,YAAX3C,GAA0C,WAAlB2C,IAA+BvC,EAC1E,gBAA4B,YAAXJ,GAA0C,WAAlB2C,GAA8BvC,EACvE,iBAA6B,YAAXJ,GAA0C,WAAlB2C,IAA+BvC,EACzE,kBAA8B,YAAXJ,GAA0C,WAAlB2C,GAA8BvC,IAI7E,OACE,gBACEM,UAAWF,EACXoC,QAAS,kBAAMA,EAAQ7C,IAFzB,SAIG2C,GAAY3C,KCjCZ,IAAM8C,EAAW,SAAC,GAUX,IATZzD,EASW,EATXA,SACA0D,EAQW,EARXA,gBACAC,EAOW,EAPXA,OACAC,EAMW,EANXA,SACAC,EAKW,EALXA,QACA5D,EAIW,EAJXA,QACA6D,EAGW,EAHXA,eACAzB,EAEW,EAFXA,MACA0B,EACW,EADXA,aAEMC,GAAmB/C,EAAAA,EAAAA,KACvB,SAACC,GAAD,OAAsBA,EAAMC,SAAS6C,oBAEjCtB,GAAezB,EAAAA,EAAAA,KACnB,SAACC,GAAD,OAAsBA,EAAMuB,UAAUC,gBAElCuB,EAAelE,EAAYC,EAAUC,GACvCiE,EAA+D,GAGnExB,EAAatC,SAAQ,SAACG,GAChBA,IAAQ0D,EAAa1D,GAAU,cAGjCyD,IACFE,EAAoBR,EAChB3D,EAAY2D,EAAiBI,GAC7B,GAKJ7D,EAAQG,SAAQ,SAACoB,GACXA,EAAMa,KAAWrC,EAASqC,KAC5B6B,EAAkB1C,EAAMa,IAAU,aAEtCyB,EAAe1D,SAAQ,SAACoB,QACD2C,IAAjBJ,GAA+BL,GAE/BlC,EAAMuC,KAAkBL,EAAgBK,KAC1CG,EAAkB1C,EAAMuC,IAAiB,cAI/C,IAAMP,EAAU,SAAC7C,GACD,UAAVA,EACFkD,IACmB,WAAVlD,EACTiD,IAEAD,EAAOhD,IAiBX,OCtFK,SAA2ByD,EAA8BC,GAC9D,IAAMC,GAAgBC,EAAAA,EAAAA,WAGtBC,EAAAA,EAAAA,YAAU,WACRF,EAAcG,QAAUJ,IACvB,CAACA,KAEJG,EAAAA,EAAAA,YAAU,WACR,IAAME,EAAW,SAACC,GACZL,EAAcG,SAASH,EAAcG,QAAQE,IAInD,OADAC,OAAOC,iBAAiBT,EAAQM,GACzB,WACLE,OAAOE,oBAAoBV,EAAQM,MAEpC,CAACN,IDwDJW,CAAkB,SAAS,SAACJ,GAC1B,GAAe,UAAXA,EAAEK,KACJnB,SACK,GAAe,cAAXc,EAAEK,KACXpB,QACK,CACL,IAAMqB,EAAMN,EAAEM,IAAIC,cACC,IAAfD,EAAIhD,QAAgBgD,GAAO,KAAOA,GAAO,KAC3CtB,EAAOsB,QAMX,iBAAK3D,UAAU,0BAAf,WACE,iBAAKA,UAAU,2BAAf,WACE,SAAC+B,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,QAGpC,iBAAK5C,UAAU,2BAAf,WACE,SAAC+B,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,QAGpC,iBAAK5C,UAAU,sBAAf,WACE,SAAC+B,EAAD,CAAKvC,KAAK,KAAKH,MAAM,QAAQ6C,QAASA,EAAtC,oBAGA,SAACH,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CACE1C,MAAM,IACN6C,QAASA,EACT5C,OAAQqD,EAAY,EACpBV,cAAeW,EAAiB,KAElC,SAACb,EAAD,CAAKvC,KAAK,KAAKH,MAAM,SAAS6C,QAASA,EAAvC,UACE,SAAC,MAAD,CAAe2B,MAAO,GAAIC,OAAQ,c,UE/P/BC,EAAuB,mB,sCCGvBC,EAAc,SAAIC,GAC7B,OAA2BC,EAAAA,EAAAA,UAAYD,GAAvC,eAAOrE,EAAP,KAAcuE,EAAd,KACMC,GAAWnB,EAAAA,EAAAA,QAAOrD,GAOxB,MAAO,CAACA,EALS,SAACP,GAChB8E,EAAU9E,GACV+E,EAASjB,QAAU9D,GAGI+E,I,wCCiBdC,EAAYC,EAAAA,YAAgC,WAA+CC,GAAS,IAArDC,EAAoD,EAApDA,eAAgBC,EAAoC,EAApCA,QAASC,EAA2B,EAA3BA,SAAUxE,EAAiB,EAAjBA,MACvFyE,EAAgBC,EAAAA,EAAWJ,GACjC,GAAuDK,EAAAA,EAAAA,UAAQ,kBAAMC,EAAAA,EAAAA,IAAeH,KAAgB,CAACA,IAAhFI,EAArB,EAAQC,YAA0BC,EAAlC,EAAkCA,iBAC5BC,GAAWC,EAAAA,EAAAA,MACXC,GAAWzF,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAsBA,EAAMC,SAASuF,YAClE,GAAgCC,EAAAA,EAAAA,GAAYb,GAA5C,eAAOc,EAAP,KAAiBC,EAAjB,KACA,EAAsDvB,EAA0BsB,EAASP,EAAYS,KAAKT,EAAYU,MAAtH,eAAOC,EAAP,KAAoBC,EAApB,KAAoCC,EAApC,KACA,EAAqE5B,EAAuBiB,GAA5F,eAAOY,EAAP,KAAyBC,EAAzB,KAA8CC,EAA9C,KAGMC,EAAS,GAETC,EADgBC,IACaZ,EAAS3E,OACtCwF,EAAa,KAGbC,GAAaC,EAAAA,EAAAA,cAAY,SAACC,EAAoBC,GAClD,IAAMC,EAAkBF,EAAKC,GAAmBA,GAAkBE,EAAAA,EAAAA,IAAeF,GAEjFT,EAAoBU,GACpBb,EAAeW,KACd,CAACX,EAAgBG,IAEdY,GAAiBL,EAAAA,EAAAA,cAAY,SAACC,GAAD,OAAoBA,EAAKK,MAAQL,EAAKd,MAAQE,EAAYF,KAAOc,EAAKb,MAAQC,EAAYD,MAAK,CAACC,IAC7HkB,GAAUP,EAAAA,EAAAA,cAAY,SAACb,EAAaC,GAAd,OAA8BoB,GAAAA,CAAIvB,EAAD,UAAcE,EAAd,YAAqBC,GAAO,CAAEkB,MAAM,MAAsB,CAACrB,IAElHpD,GAAUmE,EAAAA,EAAAA,cAAY,SAACC,GAC3B,GAAKA,EAAKK,KAAV,CAEA,IAAMJ,EAAkBG,EAAeJ,IAAQG,EAAAA,EAAAA,IAAeZ,GAAoBA,EAClFO,EAAWE,EAAMC,MAChB,CAACV,EAAkBO,EAAYM,IAE5BI,GAAeT,EAAAA,EAAAA,cAAY,SAACvF,EAAWiG,GAC3C,IAAMC,EAAUpB,EAAezC,QACzB8D,EAAUL,EAAQI,EAAQxB,IAAMuB,EAAGC,EAAQvB,IAAM3E,GACjDyF,EAAwB,IAANzF,EAAU,SAAW,OACvCoG,EAAeX,IAAoBV,EAAmBoB,EAAUD,EAEtEZ,EAAWc,EAAaP,KAAOO,EAAeF,EAAST,KACtD,CAACX,EAAgBgB,EAASR,EAAYP,IAEnCsB,GAAmBd,EAAAA,EAAAA,cAAY,WACnC,IAAME,GAAkBE,EAAAA,EAAAA,IAAeV,EAAoB5C,SACrDiE,EAAaxB,EAAezC,QAElCiD,EAAWgB,EAAYb,KACtB,CAACX,EAAgBG,EAAqBK,KAEzClD,EAAAA,EAAAA,YAAU,WACR,IAAME,EAAW,SAACC,GACD,cAAXA,EAAEK,KACJoD,GAAc,EAAG,GACG,eAAXzD,EAAEK,KACXoD,EAAa,EAAG,GACI,cAAXzD,EAAEK,KACXoD,EAAa,EAAG,GACI,YAAXzD,EAAEK,KACXoD,EAAa,GAAI,GACG,QAAXzD,EAAEK,MACXyD,KAIJ,OADA7D,OAAOC,iBAAiB,QAASH,GAC1B,WACLE,OAAOE,oBAAoB,QAASJ,MAErC,CAAC0D,EAAcK,IAElB,IAAME,GAAsBhB,EAAAA,EAAAA,cAAY,WACtC,IAAMiB,EAAS5B,EAAYG,GACrB0B,EAAc5C,EAAckB,GAAkByB,GAEpD,IAAKA,IAAWC,EAAa,MAAO,GAEpC,IAAMnG,EAAwC,GACxCC,EAA2C,GAEjDZ,MAAMC,KAAK6G,EAAYC,QAAQ1I,SAAQ,SAAC0B,EAAGO,GACzC,IAAI0G,EAAYF,EAAY/B,KAA4B,WAArBK,EAAgC,EAAI9E,GACnE2G,EAAYH,EAAY9B,KAA4B,WAArBI,EAAgC9E,EAAQ,GACrEuF,EAAOhB,EAASmC,GAAWC,GAC5BpB,EAAKK,OAEVvF,EAAauG,KAAKrB,EAAKpG,OACvBmB,EAAgBsG,KAAKrB,EAAKsB,YAG5B1C,GAAS2C,EAAAA,EAAAA,IAAgBzG,IACzB8D,GAAS4C,EAAAA,EAAAA,IAAmBzG,MAC3B,CAACqE,EAAaG,EAAkBP,EAAUJ,EAAUP,KAEvDzB,EAAAA,EAAAA,YAAU,WACJuB,GAASA,EAAQiB,EAAaG,GAClCwB,MAGC,CAAC3B,EAAaG,EAAkBwB,KAEnCnE,EAAAA,EAAAA,YAAU,WACJwB,GAAUA,EAASY,GACvB+B,MAGC,CAAC/B,EAAU+B,KAEdU,EAAAA,EAAAA,qBAAoBxD,GAAK,iBAAO,CAC9ByD,UAAW,SAAC9H,GACV,IAAM+H,EAAgBvC,EAAYG,GAElC,GAAKoC,EAAL,CACA,IAAMC,EAAcvD,EAAckB,GAAkBoC,GAE9CE,EAAgBC,GAAAA,CAAU9C,GAE1BE,EAAqB0C,EAArB1C,IAAKC,EAAgByC,EAAhBzC,IAAK+B,EAAWU,EAAXV,OAChB/G,MAAMC,KAAKR,GAAOpB,SAAQ,SAACG,EAAQ8B,GACjC,IACMsH,EAAS5C,GAA4B,WAArBI,EAAgC9E,EAAQ,GACxDuH,EAAYH,EAFH3C,GAA4B,SAArBK,EAA8B9E,EAAQ,IAEpBsH,GACnCC,EAAU3B,MACX1H,IAAWuI,EAAOzG,KAAQuH,EAAUpI,MAAQjB,MAGlDsG,EAAY4C,KAEdI,aAAc,SAACtJ,GACb,IAAMkJ,EAAgBC,GAAAA,CAAU9C,GAC1BE,EAAaE,EAAbF,IAAKC,EAAQC,EAARD,IACX0C,EAAc3C,GAAKC,GAAKmC,OAAS3I,EACjCsG,EAAY4C,IAEdK,YAAa,WACX,IAAML,EAAgBC,GAAAA,CAAU9C,GAC1BE,EAAaE,EAAbF,IAAKC,EAAQC,EAARD,WACJ0C,EAAc3C,GAAKC,GAAKmC,OAC/BrC,EAAY4C,IAEdM,MAAO,WACLlD,GAAYmD,EAAAA,EAAAA,IAAe/D,KAE7BgE,OAAQ,WACN,IAAMR,EAAgBC,GAAAA,CAAU9C,GAChCA,EAASxG,SAAQ,SAAC8J,EAAOpD,GACvBoD,EAAM9J,SAAQ,SAAC0B,EAAGiF,GAChB,IAAM6C,EAAYH,EAAc3C,GAAKC,GAChC6C,EAAU3B,OAEf2B,EAAUpI,MAAQoI,EAAUd,cAGhCjC,EAAY4C,IAEdU,OAAQ,SAACrD,EAAKC,GACZ,IAAMa,EAAOM,EAAQpB,EAAKC,GAErBa,EAAKK,MACVP,EAAWE,EAAMT,QAIrB,IAWMiD,EAAc1D,EAAW,QAAU,sBACnC2D,EAAY3D,EAAW,QAAU,QACjC4D,EAAiB5D,EAAW,UAAY,uBACxC6D,EAAc7D,EAAW,sBAAwB,2BACjD8D,EAAoB9D,EAAW,mBAAqB,UACpD+D,EAAoB/D,EAAW,mBAAqB,UAE1D,OACE,iBAAKgE,QAAO,cA3KE,IA2KF,YA3KE,KA2K6BvF,MAAM,OAAOC,OAAO,OAA/D,WACE,iBAAMhD,EAAGkF,EAAQe,EAAGf,EAAQnC,MA1KVqC,IA0KgCpC,OA1KhCoC,IA0KuDmD,KAAK,UAC7E/D,EAASgE,OAAO/I,KAAI,SAAC+F,GACpB,IAAKA,EAAKK,KAAM,OAAO,KACvB,IAAMhD,EAAG,UAAM2C,EAAKd,IAAX,YAAkBc,EAAKb,KAE5B8D,EAAQnE,EAAW,kBAAoB,QACvCsB,EAAeJ,GACjBiD,EAAQL,EACC5C,EAAKT,KAAsBH,EAAYG,KAChD0D,EAAQJ,GAGV,IAAMK,EAhCa,SAAClD,GACxB,GAAKA,EAAKK,MAASzG,EAAnB,CAEA,IAAM+H,EAAgBvC,EAAYG,GAElC,GAAKoC,GAAiB3B,EAAKT,KAAsBoC,EAAjD,CACA,IAAMC,EAAcvD,EAAckB,GAAkBoC,GAC9CwB,EAAcnD,EAAKd,IAAM0C,EAAY1C,KAAOc,EAAKb,IAAMyC,EAAYzC,IACzE,OAAOvF,EAAMuJ,KAwBaC,CAAiBpD,GACnCqD,EAAWZ,EACXS,IAAeG,EAAWX,GACzBQ,GAAkBlD,EAAKpG,QAASoG,EAAKsB,SAAQ+B,EAAWV,GAC7D,IAAMhK,EAASuK,GAAiBlD,EAAKpG,OAASoG,EAAKsB,OAEnD,OACE,eAAa1F,QAAS,kBAAMA,EAAQoE,IAApC,WACE,iBACExF,EAAGwF,EAAKb,IAAMQ,EAAaE,EAAaH,EACxCe,EAAGT,EAAKd,IAAMS,EAAaE,EAAaH,EACxCnC,MAAOoC,EAAa,IACpBnC,OAAQmC,EAAa,IACrBoD,KAAME,EACNK,OAAO,QACPC,YAAa,KAEdvD,EAAKgB,SACJ,iBACExG,EAAGwF,EAAKb,IAAMQ,EAtMP,GAsMmCD,EAC1Ce,EAAGT,EAAKd,IAAMS,EAvMP,GAuMmCD,EAC1C8D,WAAW,QACXC,iBAAiB,UACjBC,MAAO,CAAEC,SAAU,MAAOZ,KAAMP,EAAaoB,WAAY,QAL3D,SAME5D,EAAKgB,SAERrI,IACC,iBACE6B,GAAIwF,EAAKb,IAAM,IAAOQ,EAAaD,EACnCe,GAAIT,EAAKd,IAAM,IAAOS,EAAaD,EAAS,EAC5C8D,WAAW,SACXC,iBAAiB,SACjBC,MAAO,CAAEX,KAAMM,EAAUO,WAAY,OAAQD,SAAU,QALzD,SAMEhL,IAEHqH,EAAK6D,SACJ,mBACEC,IAAK9D,EAAKb,IAAM,IAAOQ,EAAaD,EACpCqE,IAAK/D,EAAKd,IAAM,IAAOS,EAAaD,EACpCsE,EAAGrE,EAAa,EAAI,EACpBoD,KAAK,cACLO,OAAQxE,EAAW,wBAA0B,kBAC7CyE,YAAa,OAnCXlG,Y,6DCsOlB,EA9Y8B,WAC5B,IAAM4G,GAAWC,EAAAA,EAAAA,MACXC,GAAc9K,EAAAA,EAAAA,KAClB,SAACC,GAAD,OAAsBA,EAAM8K,WAAWD,eAEjCE,GAAoBC,EAAAA,EAAAA,MAApBD,gBACFnG,EAAiBmG,EACnBE,OAAOF,GAAmB,EAC1BG,EAAAA,EACEnG,EAAgBC,EAAAA,EAAWJ,GACjC,GAA0CK,EAAAA,EAAAA,UACxC,kBAAMC,EAAAA,EAAAA,IAAeH,KACrB,CAACA,IAFKK,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,iBAIf8F,GAAe9H,EAAAA,EAAAA,QAAqC,MAC1D,ECpE0B,SAAClC,GAC3B,IAAMpC,GAAUgB,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAsBA,EAAMoL,OAAOrM,QAAQoC,KAAUkK,EAAAA,EAAAA,IAA0BrG,EAAAA,EAAW7D,OAChHmK,GAAevL,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAsBA,EAAMoL,OAAOG,eAAepK,IAAU,MACvFqK,GAAYzL,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAsBA,EAAMoL,OAAOK,SAAStK,KAAU,KAC9EuK,GAAW3L,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAsBA,EAAMoL,OAAOO,UAAUxK,MACpEyK,GAAO7L,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAsBA,EAAMoL,OAAOS,MAAM1K,MAC5DmE,GAAWC,EAAAA,EAAAA,MAEXuG,GAAWrF,EAAAA,EAAAA,cAAY,SAACsF,EAAsBrE,EAAgBpH,GAClEgF,GAAS0G,EAAAA,EAAAA,IAAe,CAAE7K,MAAAA,EAAO4K,UAAAA,EAAWrE,OAAAA,EAAQpH,MAAAA,OACnD,CAACgF,EAAUnE,IAER8K,GAAmBxF,EAAAA,EAAAA,cAAY,SAACyF,GACpC5G,GAAS6G,EAAAA,EAAAA,IAAuB,CAAEhL,MAAAA,EAAO+K,WAAAA,OACxC,CAAC5G,EAAUnE,IAERiL,GAAM3F,EAAAA,EAAAA,cAAY,WACtBnB,GAAS+G,EAAAA,EAAAA,IAAW,CAAElL,MAAAA,OACrB,CAACmE,EAAUnE,IAERmL,GAAO7F,EAAAA,EAAAA,cAAY,SAACiF,GACxBpG,GAASiH,EAAAA,EAAAA,IAAY,CAAEpL,MAAAA,EAAOuK,SAAAA,OAC7B,CAACpG,EAAUnE,IAEd,MAAO,CAAEpC,QAAAA,EAAS+M,SAAAA,EAAUR,aAAAA,EAAcW,iBAAAA,EAAkBT,UAAAA,EAAWY,IAAAA,EAAKV,SAAAA,EAAUY,KAAAA,EAAMV,KAAAA,GDsDxFY,CAAa5H,GATf4G,EADF,EACEA,UACAE,EAFF,EAEEA,SACA3M,EAHF,EAGEA,QACAuM,EAJF,EAIEA,aACUmB,EALZ,EAKEX,SACAG,EANF,EAMEA,iBACAG,EAPF,EAOEA,IACAE,EARF,EAQEA,KACAV,EATF,EASEA,KAEF,GAAwCtH,EAAAA,EAAAA,UAAS,IAAjD,eAAOtC,EAAP,KAAqB0K,EAArB,KACA,GAAsCpI,EAAAA,EAAAA,UAASc,EAAYwC,QAA3D,eAAO+E,EAAP,KAAoBC,EAApB,KACA,GAAsCtI,EAAAA,EAAAA,YAAtC,eAAOuI,EAAP,KAAoBC,EAApB,KACA,IAA8CxI,EAAAA,EAAAA,UAAoBc,GAAlE,iBAAO2H,GAAP,MAAwBC,GAAxB,MACA,IACE1I,EAAAA,EAAAA,UAAoBe,GADtB,iBAAOY,GAAP,MAAyBC,GAAzB,MAEA,IAA0C5B,EAAAA,EAAAA,UAAiB,KAA3D,iBAAO+D,GAAP,MAAsB4E,GAAtB,MACA,IAA0C3I,EAAAA,EAAAA,eACxCrB,GADF,iBAAOiK,GAAP,MAAsBC,GAAtB,MAGA,IAAwC7I,EAAAA,EAAAA,UAAS,GAAjD,iBAAOhD,GAAP,MAAqB8L,GAArB,MACA,IAAsD9I,EAAAA,EAAAA,eAEpDrB,GAFF,iBAAOoK,GAAP,MAA4BC,GAA5B,MAGA,GEnGqC,WACrC,OAAoChJ,EAAAA,EAAAA,UAA0B,MAA9D,eAAOiJ,EAAP,KAAmBC,EAAnB,KAUA,MAAO,CAACD,GARU9G,EAAAA,EAAAA,cAAW,iBAAC,sGACLgH,MAAMC,+BADD,cACtBC,EADsB,gBAERA,EAASC,OAFD,cAEtBC,EAFsB,OAI5BL,EAAcK,GAJc,kBAKrBA,GALqB,2CAM3B,KF0FkCC,GAArC,iBAAOP,GAAP,MAAmBQ,GAAnB,MACA,IAAgCzJ,EAAAA,EAAAA,WAAkB,GAAlD,iBAAO0J,GAAP,MAAiBC,GAAjB,MACM3I,IAAWC,EAAAA,EAAAA,MACjB,IAA4CxF,EAAAA,EAAAA,KAC1C,SAACC,GAAD,OAAsBA,EAAMC,YADtBuF,GAAR,GAAQA,SAAU0I,GAAlB,GAAkBA,WAAlB,GAA8BC,WAK9B7K,EAAAA,EAAAA,YAAU,YACJkI,GAAaE,IAAUpG,IAAS8I,EAAAA,EAAAA,IAAa,YAChD,CAAC5C,EAAWE,EAAUpG,GAAUuF,KAEnCvH,EAAAA,EAAAA,YAAU,WACRgC,IAAS+I,EAAAA,EAAAA,SACR,CAAC/I,GAAUuF,KAEdvH,EAAAA,EAAAA,YAAU,WACJkC,GACF8I,SAASC,gBAAgBC,UAAUC,IAAI,QAEvCH,SAASC,gBAAgBC,UAAUE,OAAO,UAE3C,CAAClJ,MAEJlC,EAAAA,EAAAA,YAAU,WACRyK,OACC,CAACA,KAGJ,IAAMY,IAAclI,EAAAA,EAAAA,cAClB,SAACtF,GAAmB,IAAD,EACXyE,EAAamH,GAAbnH,IAAKC,EAAQkH,GAARlH,IACc,WAArBI,KAA+BJ,GAAO1E,GACjB,SAArB8E,KAA6BL,GAAOzE,GACxC,UAAAgK,EAAa5H,eAAb,SAAsB0F,OAAOrD,EAAKC,KAEpC,CAACI,GAAkBkF,EAAc4B,KAiC7B6B,IAAqBnI,EAAAA,EAAAA,cACzB,SAACnG,GACC,IAAQsF,EAAqBmH,GAArBnH,IAAKC,EAAgBkH,GAAhBlH,IAAK+B,EAAWmF,GAAXnF,OACZiH,EAAqBvD,EAAawD,OAAO,GAAG,IAAM,GAClDC,EAAgBC,OAAOC,KAAKJ,GAAoBK,QACpD,SAAChD,EAAYnI,GAGX,OAFI8K,EAAmB9K,KAASI,IAC9B+H,EAAWnI,GAAO8K,EAAmB9K,IAChCmI,IAET,IAGF5L,EAAMlB,MAAM,IAAIF,SAAQ,SAACG,EAAQ8B,GAC/B,IAAMgO,EAASvJ,GAA4B,WAArBK,GAAgC,EAAI9E,GACpDsH,EAAS5C,GAA4B,WAArBI,GAAgC9E,EAAQ,GAE1D4N,EAAc,GAAD,OAAII,EAAJ,YAAc1G,MAActE,IAGzC9E,IAAWuI,EAAOzG,GACpB4N,EAAc,GAAD,OAAII,EAAJ,YAAc1G,IAAYtE,EAC9ByD,EAAOrI,SAASF,GACzB0P,EAAc,GAAD,OAAII,EAAJ,YAAc1G,IH/LC,mBGiM5BsG,EAAc,GAAD,OAAII,EAAJ,YAAc1G,IHlMH,yBGsM5BwD,EAAiB8C,KAEnB,CAACzD,EAAcW,EAAkBc,GAAiB9G,KAG9CmJ,IAA6B3I,EAAAA,EAAAA,cACjC,SAACC,GACC,IAAMmI,EAAqBvD,EAAawD,OAAO,GAAG,IAAM,GAClD/K,EAAG,UAAM2C,EAAKd,IAAX,YAAkBc,EAAKb,KAEhCoG,GAAiB,kBAAK4C,GAAN,cAA2B9K,EH9MhB,WGgN7B,CAACuH,EAAcW,IAGXH,GAAW,SAACxL,GAAmB,IAAD,EACN,IAAxBgL,EAAavK,QACfuE,IAAS+J,EAAAA,EAAAA,IAAW,CAAElO,MAAOyD,KAC/B6H,EAAgBxG,GAAkBoC,GAAe/H,GAEjD,UAAA6K,EAAa5H,eAAb,SAAsB6E,UAAUpG,GAEhC4M,GAAmBtO,IAIfgP,IAAa7I,EAAAA,EAAAA,cACjB,SAACC,GACC,OAAIA,EAAKpG,QAAUoG,EAAKkB,SAEpBlB,EAAK6I,QAAU7I,EAAK8I,KAEpBzQ,EAAQwQ,OAAO7I,EAAK6I,QAAQxO,QAAU,GACtChC,EAAQyQ,KAAK9I,EAAK8I,MAAMzO,QAAU,EAE3B2F,EAAK6I,OACPxQ,EAAQwQ,OAAO7I,EAAK6I,QAAQxO,QAAU,IACpC2F,EAAK8I,MACPzQ,EAAQyQ,KAAK9I,EAAK8I,MAAMzO,QAAU,KAK7C,CAAChC,IAgCG4D,GAAO,mCAAG,yFACVX,EAAajB,SAAW4L,EAAY5L,OAD1B,yDAEOwM,GAFP,qCAE4BQ,KAF5B,6BAER0B,EAFQ,KAIMA,EAAalQ,SAASyC,EAAa0N,gBAGnC1N,IAAiB2K,EAPvB,wBAQZgD,EAAAA,GAAAA,MAAY,kBARA,2BAYRC,EAAiB7Q,EAAQkH,IAAkBoC,IAG/CrG,EAAajB,SAAW4L,EAAY5L,QACpC6O,EAAe7O,OAAS,IACvB6O,EAAerQ,SAASyC,KAEzB8J,GAAS9J,GACT0K,EAAgB,KApBJ,4CAAH,sDAmDbpJ,EAAAA,EAAAA,YAAU,WACRoJ,EAAgB,MACf,CAACzG,GAAkBoC,KAoBtB,OGzVK,SAAqBlF,EAAoB0M,GAC9C,IAAMzM,GAAgBC,EAAAA,EAAAA,WAGtBC,EAAAA,EAAAA,YAAU,WACRF,EAAcG,QAAUJ,IACvB,CAACA,KAGJG,EAAAA,EAAAA,YAAU,WACR,IAAIwM,EAAKC,aAAY,WACf3M,EAAcG,SAASH,EAAcG,YACxCsM,GACH,OAAO,kBAAMG,cAAcF,MAC1B,CAACD,IH+TJI,EAAY,gBACGhN,IAAT2I,GAAuBJ,GAAcE,GACvCpG,IAAS4K,EAAAA,EAAAA,IAAe,CAAE/O,MAAOyD,OAElC,MAEHtB,EAAAA,EAAAA,YAAU,WAEe,MAAnBsB,GAAwBU,IAAS8I,EAAAA,EAAAA,IAAa,aACjD,CAACxJ,EAAgBU,KAGhB4F,EAAAA,EAAetG,GAAuB,SAACuL,EAAA,EAAD,KAGxC,iBAAK/P,UAAU,6BAAf,WACE,iBAAKA,UAAU,kFAAf,WACE,gBAAKA,UAAU,OAAf,UACE,eAAIA,UAAU,iEAAd,2BAKF,SAAC,MAAD,CACEA,UAAU,iEACVkC,QAAS,kBAAMqI,EAAS,gBAE1B,iBAAKvK,UAAWgQ,GAAAA,CAAG,iBAAkB,CAAEC,QAASrC,KAAhD,WACE,iBACE5N,UAAU,6CACVkC,QAAS,WACPgD,IAAS8I,EAAAA,EAAAA,IAAa,UACtBH,IAAY,IAJhB,WAOE,SAAC,MAAD,CAA0B7N,UAAU,iBAPtC,YAUA,iBACEA,UAAU,6CACVkC,QAAS,WACPqI,EAAS,YACTsD,IAAY,IAJhB,WAOE,SAAC,MAAD,CAAa7N,UAAU,iBAPzB,qBAUA,iBACEA,UAAU,6CACVkC,QAAS,WACPgD,IAAS8I,EAAAA,EAAAA,IAAa,SACtBH,IAAY,IAJhB,WAOE,SAAC,MAAD,CAAwB7N,UAAU,iBAPpC,kBAUA,iBACEA,UAAU,6CACVkC,QAAS,WACPgD,IAAS8I,EAAAA,EAAAA,IAAa,aACtBH,IAAY,IAJhB,WAOE,SAAC,MAAD,CAAS7N,UAAU,iBAPrB,kBAeF,SAACkQ,EAAA,EAAD,CAAOC,KAAK,SAASC,MAAM,4BAA3B,UACE,cAAGpQ,UAAU,gBAAb,oUASJ,iBAAKA,UAAU,0EAAf,WACE,gBAAKA,UAAU,mEAAf,UACE,gBAAKA,UAAU,sFAAf,UACE,SAACqE,EAAD,CACEG,eAAgBA,EAChBC,QAzHI,SAAC6B,EAAgBqF,GAC/B,GAAKrF,EAAKK,KAAV,CAEA,IAAMW,EAAShB,EAAKqF,IAAc,GAC5B0E,EAAc/J,GAAKG,EAAAA,EAAAA,IAAekF,IAClC2E,EAAW3L,EAAcgH,GAAWrE,GACpCiJ,EAAkBF,EACpB1L,GAAc8B,EAAAA,EAAAA,IAAekF,IAAY0E,QACzCxN,EACJ2J,EAAe8D,EAAS9I,QACxBkF,EAAc,OAAC6D,QAAD,IAACA,OAAD,EAACA,EAAiB/I,QAChCoF,GAAmB0D,GACnBzD,GAAiBvF,GACjByF,GAAiBsD,GACjBvK,GAAoB6F,GACpBqB,GAAgB1G,EAAKd,IAAM8K,EAAS9K,KAAOc,EAAKb,IAAM6K,EAAS7K,KAC/DyH,GACEqD,EACIjK,EAAKd,IAAM+K,EAAgB/K,KAAOc,EAAKb,IAAM8K,EAAgB9K,SAC7D5C,KAuGI6B,SA9Ha,SAACY,IArDH,SAACA,GACtB,IAAI8F,IAAaE,EAAjB,CAEA,IAiBc,EAjBVkF,GAAW,EACXC,GAAmB,EAEvBnL,EAASxG,SAAQ,SAAC0G,GAChB,OAAOA,EAAI1G,SAAQ,SAACwH,GACbA,EAAKK,OACNuI,GAAW5I,KACbkK,GAAW,EACXtE,EAAK5F,GACL0I,GAA2B1I,IAEzBmK,IAAkBA,EAAmBnK,EAAKpG,QAAUoG,EAAKkB,gBAI5CkJ,EAAAA,EAAAA,IAAgB/R,GAEjC6R,IACU,OAAZzF,QAAY,IAAZA,GAAA,UAAAA,EAAc5H,eAAd,SAAuBwF,UAGrB8H,GACFzE,KA6BF2E,CAAerL,IA8HLf,IAAKwG,EACL7K,MAAO0B,SAIb,gBAAK5B,UAAU,2EAAf,UACE,iBAAKA,UAAU,qDAAf,WACE,SAAC2B,EAAD,CACEhD,QAASA,EAAQkH,IAAkBoC,KAAkB,GACrDrG,aAAcA,EACdlD,SAAU6N,EACVrL,aAAcA,MAEhB,SAACiB,EAAD,CACEE,OA1SG,SAAChD,GACG,IAAD,EAAhB,GAAIyO,GAGF,OAFA,UAAA/C,EAAa5H,eAAb,SAAsBoF,aAAalJ,QACnCkP,GAAYrN,GAAe,GAI7B,IAAMsO,EAAiB7Q,EAAQkH,IAAkBoC,IAEjD,GAAIrG,EAAajB,OAAS4L,EAAY5L,QAAU6O,EAAe7O,OAAS,EAAG,CACzE,IAAMiQ,EAAQ,UAAMhP,GAAN,OAAqBvC,GACnCiN,EAAgBsE,GAChBrC,GAAYqC,EAASjQ,UA+Rb2B,SA3RK,WACE,IAAD,EAAhB,GAAIwL,GAGF,OAFA,UAAA/C,EAAa5H,eAAb,SAAsBqF,mBACtB+F,GAAYrN,GAAe,GAI7B,IAAM0P,EAAWhP,EAAa8M,MAAM,GAAI,GACxCpC,EAAgBsE,GAChBrC,GAAYqC,EAASjQ,SAmRX4B,QAASA,GACT7D,SAAU6N,EACVnK,gBAAiBqK,EACjB9N,QAASA,EAAQkH,IAAkBoC,KAAkB,GACrDzF,eACE7D,GAAQ8H,EAAAA,EAAAA,IAAeZ,KAAmBiH,IAAiB,IAC3D,GAEF/L,MAAOG,GACPuB,aAAcwK,kB,8HIpbfiD,EAA0B,SAAC,GAAoD,IAAlDC,EAAiD,EAAjDA,KAAMC,EAA2C,EAA3CA,MAAOS,EAAoC,EAApCA,UAAWC,EAAyB,EAAzBA,SAAU9O,EAAe,EAAfA,SACpEkD,GAAWC,EAAAA,EAAAA,MACX4L,GAASpR,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAsBA,EAAM8K,WAAWsG,YAAcb,KAEhF,OACE,SAAC,SAAD,CAAiBc,KAAMF,EAAQG,GAAIC,EAAAA,SAAnC,UACE,SAAC,IAAD,CACED,GAAG,MACHlR,UAAU,qCACVoR,QAAS,kBAAMlM,GAAS8I,EAAAA,EAAAA,IAAa8C,KAHvC,UAKE,iBAAK9Q,UAAU,4FAAf,WACE,SAAC,UAAD,CACEkR,GAAIC,EAAAA,SACJE,MAAM,wBACNC,UAAU,YACVC,QAAQ,cACRC,MAAM,uBACNC,UAAU,cACVC,QAAQ,YAPV,UASE,SAAC,YAAD,CAAgB1R,UAAU,kEAI5B,iBACEA,UAAU,qDACV,cAAY,OAFd,qBAMA,SAAC,UAAD,CACEkR,GAAIC,EAAAA,SACJE,MAAM,wBACNC,UAAU,uDACVC,QAAQ,yCACRC,MAAM,uBACNC,UAAU,yCACVC,QAAQ,uDAPV,UASE,iBAAK1R,UAAU,6LAAf,WACE,gBAAKA,UAAU,yBAAf,UACE,SAAC,MAAD,CACEA,UAAU,yBACVkC,QAAS,kBAAMgD,GAAS8I,EAAAA,EAAAA,IAAa8C,UAGzC,0BACE,iBAAK9Q,UAAU,cAAf,WACE,gBAAKA,UAAU,OAAf,SAAuB6Q,KACvB,SAAC,UAAD,CACEK,GAAG,KACHlR,UAAU,8CAFZ,SAIGoQ,KAEH,gBAAKpQ,UAAU,OAAf,SACGgC,uB,+GC9Df2P,EAGF,CACFxC,OAAQ,CACNyC,QAAS,MACTC,WAAY,OAEdzC,KAAM,CACJwC,QAAS,MACTC,WAAY,QAKHC,EAAiBlD,OAAOC,KAAK8C,GAMnC,SAASlL,EAAekF,GAC7B,OALK,SAAkBA,GACvB,MAAqB,WAAdA,EAIAoG,CAASpG,GAAa,OAAS,SAGjC,SAASqG,EAAiBC,EAAsBtG,GAAuB,IAAD,EACrEuG,EAAMP,EAAchG,GACtBwG,EAAa,EACbC,EAAgB,EAcpB,OAZAxD,OAAOyD,QAAQJ,EAAKtG,IAAY7M,SAAQ,YAAe,IAAXwT,GAAU,eAC9CV,EAAUU,EAAKJ,EAAIN,SAAWU,EAAK9K,OAAO7G,OAAS,EACrDiR,EAAUO,IACZA,EAAaP,GAGf,IAAMC,EAAaS,EAAKJ,EAAIL,YACxBA,EAAaO,IACfA,EAAgBP,MAIb,EAAP,aACGK,EAAIN,QAAUO,IADjB,SAEGD,EAAIL,WAAaO,GAFpB,EAyBK,SAAS1J,EAAeuJ,GAC7B,IAAMM,EAAYP,EAAiBC,EAAM,UACnCO,EAAUR,EAAiBC,EAAM,QAKjC3M,EA1BD,SAAyB9F,GAG9B,IAFA,IAAM8F,EAAqB7E,MAAMjB,GAExB8K,EAAI,EAAGA,EAAI9K,EAAM8K,IAAK,CAC7BhF,EAASgF,GAAK7J,MAAMjB,GACpB,IAAK,IAAIiT,EAAI,EAAGA,EAAIjT,EAAMiT,IACxBnN,EAASgF,GAAGmI,GAAK,CACfjN,IAAK8E,EACL7E,IAAKgN,EACL9L,MAAM,GAKZ,OAAOrB,EAYUoN,CAFfC,KAAKC,IAAL,MAAAD,MAAI,OAAQ/D,OAAOiE,OAAON,IAAtB,eAAqC3D,OAAOiE,OAAOL,MAAY,GA8BrE,OA1BAV,EAAehT,SAAQ,SAAC6M,GACtBiD,OAAOyD,QAAQJ,EAAKtG,IAAY7M,SAAQ,YAEtC,IAF2D,IAAD,eAAlBwI,EAAkB,KAAVgL,EAAU,KAC7CQ,EAAoCR,EAAzC9M,IAAoBuN,EAAqBT,EAA1B7M,IAAe+B,EAAW8K,EAAX9K,OAC7BtI,EAAI,EAAGA,EAAIsI,EAAO7G,OAAQzB,IAAK,CACtC,IACMuG,EAAMsN,GAA0B,WAAdpH,EAAyBzM,EAAI,GAC/C8T,EAAW1N,EAFLwN,GAA0B,SAAdnH,EAAuBzM,EAAI,IAEpBuG,GAE/BuN,EAASrM,MAAO,EAChBqM,EAASxL,OAASA,EAAOtI,GACzB8T,EAASrH,GAAarE,EAEZ,IAANpI,IAAS8T,EAAS1L,OAASA,UAKjC2K,EAAKgB,SACPhB,EAAKgB,QAAQnU,SAAQ,YAAiB,IAAD,eAAd0G,EAAc,KAATC,EAAS,KAC7BuN,EAAW1N,EAASE,GAAKC,GAC1BuN,EAASrM,OAEdqM,EAAS7I,QAAS,MAIf7E,I,sMChGT,IAAM4N,EAAkB,IAAIC,KAAK,uBAM1B,SAASC,EAAoBrS,GAClC,OAAOsS,EAAAA,EAAAA,GAAQH,EAAiBnS,GAG3B,SAASuS,IAGd,IAXoCC,EAW9BxS,GAX8BwS,EAWA,IAAIJ,MAVjCK,EAAAA,EAAAA,GAAiBD,EAAML,IAY9B,OAAOP,KAAKc,IAAI1S,EAAO6D,EAAAA,EAAAA,OAAoB,GActC,MAXA,WAA8B,IAAD,EAC9B7D,EAAQuS,IACNI,EAAa7I,OAAM,UAAC8I,EAAAA,MAAkBrQ,OAAOsQ,SAASC,eAAnC,aAAC,EAA2C9S,OAGrE,OAFI2S,GAAc,IAAG3S,EAAQ4R,KAAKc,IAAI1S,EAAO2S,IAEtC,CACLvS,UAAWyD,EAAAA,EAAW7D,GACtByD,eAAgBzD,GAIyB+S,GAAnBtP,GAAnB,EAAQrD,UAAR,EAAmBqD,gBACO8O,IAE1B,SAASxO,EAAe3D,GAC7B,IAAI6D,EAAc6B,GAAAA,CAAI1F,EAAW,YAC3B8D,EAAmBD,EAAc,SAAW,OAElD,OADKA,IAAaA,EAAc6B,GAAAA,CAAI1F,EAAW,WACxC,CAAE6D,YAAAA,EAAaC,iBAAAA,GAiBjB,SAASyL,EAAgB/R,GAG9B,OAFsBiQ,OAAOiE,OAAOlU,EAAO,QAAY2K,OAAO3I,OAC1CiO,OAAOiE,OAAOlU,EAAO,MAAU2K,OAAO3I,S,2GC9D/C0E,EAAc,SAACtE,GAC1B,IAAMmE,GAAWC,EAAAA,EAAAA,MAEX4O,GAAiB1N,EAAAA,EAAAA,cAAY,SAAC2N,GAClC9O,GAASK,EAAAA,EAAAA,IAAY,CAAExE,MAAAA,EAAOuE,SAAU0O,OACvC,CAAC9O,EAAUnE,IAYd,MAAO,EAVUpB,EAAAA,EAAAA,KAAY,SAACC,GAC5B,IAAMqS,EAAOrS,EAAMuB,UAAU8S,UAAUlT,GACvC,IAAKkR,EAAM,CACT,IAAMiC,GAAkBxL,EAAAA,EAAAA,IAAe9D,EAAAA,EAAW7D,IAElD,OADAgT,EAAeG,GACRA,EAET,OAAOjC,KAGS8B","sources":["lib/statuses.ts","components/grid/Cell.tsx","components/grid/CompletedRow.tsx","components/grid/CurrentRow.tsx","components/grid/EmptyRow.tsx","components/grid/Grid.tsx","components/keyboard/Key.tsx","components/keyboard/Keyboard.tsx","lib/useWindowListener.ts","constants/colors.ts","lib/hooks.ts","components/crossword/Crossword.tsx","components/crosswordle.tsx","redux/hooks/useGameState.ts","lib/words.ts","lib/useInterval.ts","components/modals/Modal.tsx","lib/crossword-utils.ts","lib/utils.ts","redux/hooks/useGridData.ts"],"sourcesContent":["export type CharStatus = 'absent' | 'present' | 'correct' | 'known';\r\n\r\nexport type CharValue =\r\n  | 'Q'\r\n  | 'W'\r\n  | 'E'\r\n  | 'R'\r\n  | 'T'\r\n  | 'Y'\r\n  | 'U'\r\n  | 'I'\r\n  | 'O'\r\n  | 'P'\r\n  | 'A'\r\n  | 'S'\r\n  | 'D'\r\n  | 'F'\r\n  | 'G'\r\n  | 'H'\r\n  | 'J'\r\n  | 'K'\r\n  | 'L'\r\n  | 'Z'\r\n  | 'X'\r\n  | 'C'\r\n  | 'V'\r\n  | 'B'\r\n  | 'N'\r\n  | 'M'\r\n\r\nexport const getStatuses = (\r\n  solution: string,\r\n  guesses: string[],\r\n  knownChars?: string[]\r\n): { [key: string]: CharStatus } => {\r\n  const charObj: { [key: string]: CharStatus } = {}\r\n\r\n  guesses.forEach((word) => {\r\n    word.split('').forEach((letter, i) => {\r\n      if (!solution.includes(letter)) {\r\n        // make status absent\r\n        return (charObj[letter] = 'absent')\r\n      }\r\n\r\n      if (letter === solution[i]) {\r\n        //make status correct\r\n        return (charObj[letter] = 'correct')\r\n      }\r\n\r\n      if (charObj[letter] !== 'correct') {\r\n        //make status present\r\n        return (charObj[letter] = 'present')\r\n      }\r\n    })\r\n  })\r\n\r\n  knownChars?.forEach((letter) => {\r\n    if (charObj[letter] !== 'correct') charObj[letter] = 'known'\r\n  });\r\n\r\n  return charObj\r\n}\r\n\r\nexport const getGuessStatuses = (solution: string, guess: string): CharStatus[] => {\r\n  const splitSolution = solution.split('')\r\n  const splitGuess = guess.split('')\r\n\r\n  const solutionCharsTaken = splitSolution.map((_) => false)\r\n\r\n  const statuses: CharStatus[] = Array.from(Array(guess.length))\r\n\r\n  // handle all correct cases first\r\n  splitGuess.forEach((letter, i) => {\r\n    if (letter === splitSolution[i]) {\r\n      statuses[i] = 'correct'\r\n      solutionCharsTaken[i] = true\r\n      return\r\n    }\r\n  })\r\n\r\n  splitGuess.forEach((letter, i) => {\r\n    if (statuses[i]) return\r\n\r\n    if (!splitSolution.includes(letter)) {\r\n      // handles the absent case\r\n      statuses[i] = 'absent'\r\n      return\r\n    }\r\n\r\n    // now we are left with \"present\"s\r\n    const indexOfPresentChar = splitSolution.findIndex(\r\n      (x, index) => x === letter && !solutionCharsTaken[index]\r\n    )\r\n\r\n    if (indexOfPresentChar > -1) {\r\n      statuses[i] = 'present'\r\n      solutionCharsTaken[indexOfPresentChar] = true\r\n      return\r\n    } else {\r\n      statuses[i] = 'absent'\r\n      return\r\n    }\r\n  })\r\n\r\n  return statuses\r\n}\r\n","import { CharStatus } from '../../lib/statuses'\r\nimport classnames from 'classnames'\r\nimport { RootState } from '../../redux/store'\r\nimport { useSelector } from 'react-redux'\r\n\r\ntype Props = {\r\n  value?: string;\r\n  mode?: 'input' | 'known' | 'pencil';\r\n  status?: CharStatus;\r\n  size?: 'sm' | 'lg';\r\n  isFocused?: boolean;\r\n}\r\n\r\nexport const Cell = ({ value, status, mode = 'input', size = 'lg', isFocused = false }: Props) => {\r\n  const highContrastMode = useSelector((state: RootState) => state.settings.highContrastMode);\r\n\r\n  const classes = classnames(\r\n    'border-solid border-2 flex items-center justify-center mx-0.5 font-bold rounded dark:text-white select-none',\r\n    {\r\n      'bg-white border-slate-200 dark:bg-slate-900 dark:border-slate-600': !status,\r\n      'bg-white border-slate-200 text-green-500 text-opacity-50 dark:text-green-500': mode === 'known' && !status && !highContrastMode,\r\n      'bg-white border-slate-200 text-orange-500 text-opacity-50 dark:text-orange-500': mode === 'known' && !status && highContrastMode,\r\n      'bg-white border-slate-200 text-slate-400/50 text-opacity-50 dark:text-slate-400/50': mode === 'pencil' && !status,\r\n      'bg-slate-400 dark:bg-slate-700 text-white border-slate-400 dark:border-slate-700': status === 'absent',\r\n      'bg-green-500 text-white border-green-500': status === 'correct' && !highContrastMode,\r\n      'bg-orange-500 text-white border-orange-500': status === 'correct' && highContrastMode,\r\n      'bg-yellow-500 dark:bg-yellow-700 text-white border-yellow-500 dark:border-yellow-700':\r\n        status === 'present' && !highContrastMode,\r\n      'bg-cyan-500 text-white border-cyan-500': status === 'present' && highContrastMode,\r\n      'w-14 h-14 text-lg': size === 'lg',\r\n      'w-5 h-5 text-sm': size === 'sm',\r\n      'border-yellow-300': isFocused,\r\n    }\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <div className={classes}>{value}</div>\r\n    </>\r\n  )\r\n}\r\n","import { getGuessStatuses } from '../../lib/statuses'\r\nimport { Cell } from './Cell'\r\n\r\ntype Props = {\r\n  solution: string;\r\n  guess: string;\r\n  size?: 'sm' | 'lg';\r\n}\r\n\r\nexport const CompletedRow = ({ solution, guess, size = 'lg' }: Props) => {\r\n  const statuses = getGuessStatuses(solution, guess);\r\n\r\n  return (\r\n    <div className=\"flex justify-center mb-1\">\r\n      {guess.split('').map((letter, i) => (\r\n        <Cell key={i} value={letter} status={statuses[i]} size={size} />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import { useSelector } from 'react-redux'\r\nimport { RootState } from '../../redux/store'\r\nimport { Cell } from './Cell'\r\n\r\ntype Props = {\r\n  guess: string\r\n  solution: string\r\n  focusedIndex: number\r\n}\r\n\r\nexport const CurrentRow: React.FC<Props> = ({\r\n  guess,\r\n  solution,\r\n  focusedIndex,\r\n}) => {\r\n  const { knownLetters, penciledLetters } = useSelector(\r\n    (state: RootState) => state.crossword\r\n  )\r\n\r\n  if (solution.length - guess.length < 0) return null\r\n\r\n  const splitGuess = guess.split('')\r\n  const emptyCells = Array.from(Array(solution.length - splitGuess.length))\r\n  const guessLength = splitGuess.length\r\n\r\n  const getLetter = (index: number) =>\r\n    splitGuess[index] || knownLetters[index] || penciledLetters[index]\r\n\r\n  const getMode = (index: number) => {\r\n    if (splitGuess[index]) return 'input'\r\n    if (knownLetters[index]) return 'known'\r\n    if (penciledLetters[index]) return 'pencil'\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex justify-center mb-1\">\r\n      {splitGuess.map((_, i) => (\r\n        <Cell\r\n          key={i}\r\n          value={getLetter(i)}\r\n          mode={getMode(i)}\r\n          isFocused={i === focusedIndex}\r\n        />\r\n      ))}\r\n      {emptyCells.map((_, i) => (\r\n        <Cell\r\n          key={i}\r\n          value={getLetter(i + guessLength)}\r\n          mode={getMode(i + guessLength)}\r\n          isFocused={i + guessLength === focusedIndex}\r\n        />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import { Cell } from './Cell'\r\n\r\ntype Props = {\r\n  solution: string;\r\n  size?: 'sm' | 'lg';\r\n}\r\n\r\nexport const EmptyRow : React.FC<Props>= ({ solution, size = 'lg' }) => {\r\n  const emptyCells = Array.from(Array(solution.length))\r\n\r\n  return (\r\n    <div className=\"flex justify-center mb-1\">\r\n      {emptyCells.map((_, i) => (\r\n        <Cell key={i} size={size} />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import { useWindowHeight } from '@react-hook/window-size/throttled';\r\nimport { CompletedRow } from './CompletedRow';\r\nimport { CurrentRow } from './CurrentRow';\r\nimport { EmptyRow } from './EmptyRow';\r\n\r\ntype Props = {\r\n  solution: string;\r\n  guesses: string[];\r\n  currentGuess: string;\r\n  focusedIndex: number;\r\n}\r\n\r\nexport const Grid = ({ solution, guesses, currentGuess, focusedIndex }: Props) => {\r\n  const height = useWindowHeight();\r\n\r\n\r\n  const empties =\r\n    guesses.length < 5 ? Array.from(Array(5 - guesses.length)) : [];\r\n\r\n  return (\r\n    <div className=\"pb-6\">\r\n      {guesses.map((guess, i) => (\r\n        <CompletedRow key={i} guess={guess} solution={solution} />\r\n      ))}\r\n      {guesses.length < 6 && (\r\n        <CurrentRow guess={currentGuess} solution={solution} focusedIndex={focusedIndex} />\r\n      )}\r\n      {empties.map((_, i) => (\r\n        <EmptyRow key={i} solution={solution} />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import { ReactNode } from 'react';\r\nimport classnames from 'classnames';\r\nimport { KeyValue } from '../../lib/keyboard';\r\nimport { CharStatus } from '../../lib/statuses';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../redux/store';\r\n\r\ntype Props = {\r\n  children?: ReactNode;\r\n  value: KeyValue;\r\n  size?: 'sm' | 'lg';\r\n  status?: CharStatus;\r\n  crossedStatus?: CharStatus;\r\n  onClick?: (value: KeyValue) => void;\r\n}\r\n\r\nexport const Key = ({\r\n  children,\r\n  status,\r\n  crossedStatus,\r\n  size = 'sm',\r\n  value,\r\n  onClick = () => {},\r\n}: Props) => {\r\n  const highContrastMode = useSelector((state: RootState) => state.settings.highContrastMode);\r\n\r\n  const classes = classnames(\r\n    'flex items-center justify-center rounded mx-0.5 text-xs font-bold cursor-pointer keyboard-key dark:text-white',\r\n    `keyboard-key-${size} select-none`,\r\n    {\r\n      'bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 active:bg-slate-400': !status,\r\n      'bg-slate-400 text-white': status === 'absent',\r\n      'bg-green-500 hover:bg-green-600 active:bg-green-700 text-white dark:bg-green-700':\r\n        status === 'correct' && !highContrastMode,\r\n      'bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white dark:bg-yellow-700':\r\n        status === 'present' && !highContrastMode,\r\n      'bg-orange-500 hover:bg-orange-600 active:bg-orange-700 text-white dark:bg-orange-700':\r\n        status === 'correct' && highContrastMode,\r\n      'bg-cyan-500 hover:bg-cyan-600 active:bg-cyan-700 text-white dark:bg-cyan-700':\r\n        status === 'present' && highContrastMode,\r\n      'bg-cross-slate': !status && crossedStatus === 'absent',\r\n      'bg-cross-yellow': status === 'present' && crossedStatus === 'absent' && !highContrastMode,\r\n      'bg-cross-cyan': status === 'present' && crossedStatus === 'absent' && highContrastMode,\r\n      'bg-cross-green': status === 'correct' && crossedStatus === 'absent' && !highContrastMode,\r\n      'bg-cross-orange': status === 'correct' && crossedStatus === 'absent' && highContrastMode,\r\n    }\r\n  )\r\n\r\n  return (\r\n    <div\r\n      className={classes}\r\n      onClick={() => onClick(value)}\r\n    >\r\n      {children || value}\r\n    </div>\r\n  )\r\n}\r\n","import { KeyValue } from '../../lib/keyboard'\r\nimport { CharStatus, getStatuses } from '../../lib/statuses'\r\nimport { Key } from './Key'\r\nimport { BackspaceIcon } from '@heroicons/react/outline'\r\nimport { RootState } from '../../redux/store'\r\nimport { useSelector } from 'react-redux'\r\nimport { useWindowListener } from '../../lib/useWindowListener'\r\n\r\ntype Props = {\r\n  solution: string\r\n  crossedSolution: string | undefined\r\n  onChar: (value: string) => void\r\n  onDelete: () => void\r\n  onEnter: () => void\r\n  guesses: string[]\r\n  crossedGuesses: string[]\r\n  index: number\r\n  crossedIndex?: number\r\n}\r\n\r\nexport const Keyboard = ({\r\n  solution,\r\n  crossedSolution,\r\n  onChar,\r\n  onDelete,\r\n  onEnter,\r\n  guesses,\r\n  crossedGuesses,\r\n  index,\r\n  crossedIndex,\r\n}: Props) => {\r\n  const advancedKeyboard = useSelector(\r\n    (state: RootState) => state.settings.advancedKeyboard\r\n  )\r\n  const knownLetters = useSelector(\r\n    (state: RootState) => state.crossword.knownLetters\r\n  )\r\n  const charStatuses = getStatuses(solution, guesses)\r\n  let crossedCharStatus: { [key: string]: CharStatus | undefined } = {}\r\n\r\n  // Update all known letters in the word to green\r\n  knownLetters.forEach((letter) => {\r\n    if (letter) charStatuses[letter] = 'correct'\r\n  })\r\n\r\n  if (advancedKeyboard) {\r\n    crossedCharStatus = crossedSolution\r\n      ? getStatuses(crossedSolution, crossedGuesses)\r\n      : {}\r\n\r\n    // Update all incorrect letters at the selected position to be partially gray\r\n    // TODO: Update crossedCharStatus to be an array of letters that should be partially grayed\r\n    // TODO: Given solution \"bends\" and guess \"seedy\" mark all e's except the 2nd index as partially gray\r\n    guesses.forEach((guess) => {\r\n      if (guess[index] !== solution[index])\r\n        crossedCharStatus[guess[index]] = 'absent'\r\n    })\r\n    crossedGuesses.forEach((guess) => {\r\n      if (crossedIndex === undefined || !crossedSolution) return\r\n\r\n      if (guess[crossedIndex] !== crossedSolution[crossedIndex])\r\n        crossedCharStatus[guess[crossedIndex]] = 'absent'\r\n    })\r\n  }\r\n\r\n  const onClick = (value: KeyValue) => {\r\n    if (value === 'ENTER') {\r\n      onEnter()\r\n    } else if (value === 'DELETE') {\r\n      onDelete()\r\n    } else {\r\n      onChar(value)\r\n    }\r\n  }\r\n\r\n  useWindowListener('keyup', (e: KeyboardEvent) => {\r\n    if (e.code === 'Enter') {\r\n      onEnter()\r\n    } else if (e.code === 'Backspace') {\r\n      onDelete()\r\n    } else {\r\n      const key = e.key.toUpperCase()\r\n      if (key.length === 1 && key >= 'A' && key <= 'Z') {\r\n        onChar(key)\r\n      }\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div className=\"mt-auto md:mt-none mb-3\">\r\n      <div className=\"flex justify-center mb-1\">\r\n        <Key\r\n          value=\"Q\"\r\n          onClick={onClick}\r\n          status={charStatuses['Q']}\r\n          crossedStatus={crossedCharStatus['Q']}\r\n        />\r\n        <Key\r\n          value=\"W\"\r\n          onClick={onClick}\r\n          status={charStatuses['W']}\r\n          crossedStatus={crossedCharStatus['W']}\r\n        />\r\n        <Key\r\n          value=\"E\"\r\n          onClick={onClick}\r\n          status={charStatuses['E']}\r\n          crossedStatus={crossedCharStatus['E']}\r\n        />\r\n        <Key\r\n          value=\"R\"\r\n          onClick={onClick}\r\n          status={charStatuses['R']}\r\n          crossedStatus={crossedCharStatus['R']}\r\n        />\r\n        <Key\r\n          value=\"T\"\r\n          onClick={onClick}\r\n          status={charStatuses['T']}\r\n          crossedStatus={crossedCharStatus['T']}\r\n        />\r\n        <Key\r\n          value=\"Y\"\r\n          onClick={onClick}\r\n          status={charStatuses['Y']}\r\n          crossedStatus={crossedCharStatus['Y']}\r\n        />\r\n        <Key\r\n          value=\"U\"\r\n          onClick={onClick}\r\n          status={charStatuses['U']}\r\n          crossedStatus={crossedCharStatus['U']}\r\n        />\r\n        <Key\r\n          value=\"I\"\r\n          onClick={onClick}\r\n          status={charStatuses['I']}\r\n          crossedStatus={crossedCharStatus['I']}\r\n        />\r\n        <Key\r\n          value=\"O\"\r\n          onClick={onClick}\r\n          status={charStatuses['O']}\r\n          crossedStatus={crossedCharStatus['O']}\r\n        />\r\n        <Key\r\n          value=\"P\"\r\n          onClick={onClick}\r\n          status={charStatuses['P']}\r\n          crossedStatus={crossedCharStatus['P']}\r\n        />\r\n      </div>\r\n      <div className=\"flex justify-center mb-1\">\r\n        <Key\r\n          value=\"A\"\r\n          onClick={onClick}\r\n          status={charStatuses['A']}\r\n          crossedStatus={crossedCharStatus['A']}\r\n        />\r\n        <Key\r\n          value=\"S\"\r\n          onClick={onClick}\r\n          status={charStatuses['S']}\r\n          crossedStatus={crossedCharStatus['S']}\r\n        />\r\n        <Key\r\n          value=\"D\"\r\n          onClick={onClick}\r\n          status={charStatuses['D']}\r\n          crossedStatus={crossedCharStatus['D']}\r\n        />\r\n        <Key\r\n          value=\"F\"\r\n          onClick={onClick}\r\n          status={charStatuses['F']}\r\n          crossedStatus={crossedCharStatus['F']}\r\n        />\r\n        <Key\r\n          value=\"G\"\r\n          onClick={onClick}\r\n          status={charStatuses['G']}\r\n          crossedStatus={crossedCharStatus['G']}\r\n        />\r\n        <Key\r\n          value=\"H\"\r\n          onClick={onClick}\r\n          status={charStatuses['H']}\r\n          crossedStatus={crossedCharStatus['H']}\r\n        />\r\n        <Key\r\n          value=\"J\"\r\n          onClick={onClick}\r\n          status={charStatuses['J']}\r\n          crossedStatus={crossedCharStatus['J']}\r\n        />\r\n        <Key\r\n          value=\"K\"\r\n          onClick={onClick}\r\n          status={charStatuses['K']}\r\n          crossedStatus={crossedCharStatus['K']}\r\n        />\r\n        <Key\r\n          value=\"L\"\r\n          onClick={onClick}\r\n          status={charStatuses['L']}\r\n          crossedStatus={crossedCharStatus['L']}\r\n        />\r\n      </div>\r\n      <div className=\"flex justify-center\">\r\n        <Key size=\"lg\" value=\"ENTER\" onClick={onClick}>\r\n          Enter\r\n        </Key>\r\n        <Key\r\n          value=\"Z\"\r\n          onClick={onClick}\r\n          status={charStatuses['Z']}\r\n          crossedStatus={crossedCharStatus['Z']}\r\n        />\r\n        <Key\r\n          value=\"X\"\r\n          onClick={onClick}\r\n          status={charStatuses['X']}\r\n          crossedStatus={crossedCharStatus['X']}\r\n        />\r\n        <Key\r\n          value=\"C\"\r\n          onClick={onClick}\r\n          status={charStatuses['C']}\r\n          crossedStatus={crossedCharStatus['C']}\r\n        />\r\n        <Key\r\n          value=\"V\"\r\n          onClick={onClick}\r\n          status={charStatuses['V']}\r\n          crossedStatus={crossedCharStatus['V']}\r\n        />\r\n        <Key\r\n          value=\"B\"\r\n          onClick={onClick}\r\n          status={charStatuses['B']}\r\n          crossedStatus={crossedCharStatus['B']}\r\n        />\r\n        <Key\r\n          value=\"N\"\r\n          onClick={onClick}\r\n          status={charStatuses['N']}\r\n          crossedStatus={crossedCharStatus['N']}\r\n        />\r\n        <Key\r\n          value=\"M\"\r\n          onClick={onClick}\r\n          status={charStatuses['M']}\r\n          crossedStatus={crossedCharStatus['M']}\r\n        />\r\n        <Key size=\"lg\" value=\"DELETE\" onClick={onClick}>\r\n          <BackspaceIcon width={25} height={25} />\r\n        </Key>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useRef } from 'react';\r\n\r\nexport function useWindowListener(action: keyof WindowEventMap, callback: Function) {\r\n  const savedCallback = useRef<Function>();\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  useEffect(() => {\r\n    const listener = (e: any) => {\r\n      if (savedCallback.current) savedCallback.current(e);\r\n    }\r\n\r\n    window.addEventListener(action, listener);\r\n    return () => {\r\n      window.removeEventListener(action, listener);\r\n    }\r\n  }, [action]);\r\n}\r\n","export const WORDLE_CORRECT_COLOR = 'rgb(34, 197, 94)';\r\nexport const WORDLE_WRONG_COLOR = 'rgb(148, 163, 184)';\r\nexport const WORDLE_MISPLACED_COLOR = 'rgb(234, 179, 8)';\r\nexport const WORDLE_LOSE_COLOR = 'red';\r\n","import { useWindowWidth } from '@react-hook/window-size/throttled';\r\nimport { useRef, useState } from 'react';\r\n\r\nexport const useRefState = <T>(initial: T | (() => T)) => {\r\n  const [state, _setState] = useState<T>(initial);\r\n  const stateRef = useRef(state);\r\n\r\n  const setState = (value: T) => {\r\n    _setState(value);\r\n    stateRef.current = value;\r\n  };\r\n\r\n  return [state, setState, stateRef] as const;\r\n};\r\n","import get from \"lodash/get\";\r\nimport cloneDeep from 'lodash/cloneDeep';\r\nimport React, { useCallback, useEffect, useImperativeHandle, useMemo } from \"react\";\r\nimport { useRefState } from \"../../lib/hooks\";\r\nimport { GridData, CellData, Direction, UsedCellData, WordInput } from \"../../types\"\r\nimport { createGridData, otherDirection } from \"../../lib/crossword-utils\";\r\nimport { useGridData } from \"../../redux/hooks/useGridData\";\r\nimport { getInitialClue } from \"../../lib/utils\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"../../redux/store\";\r\nimport { setKnownLetters, setPenciledLetters } from \"../../redux/slices/crosswordSlice\";\r\nimport crosswords from \"../../constants/crosswords\";\r\n\r\ntype Props = {\r\n  crosswordIndex: number;\r\n  guess?: string;\r\n  onMoved?: (cell: CellData, direction: Direction) => void;\r\n  onChange?: (gridData: GridData) => void;\r\n};\r\n\r\ntype Handle = {\r\n  moveTo: (row: number, col: number) => void,\r\n  guessWord: (guess: string) => void,\r\n  pencilLetter: (letter: string) => void,\r\n  eraseLetter: () => void,\r\n  reset: () => void,\r\n  reveal: () => void,\r\n}\r\n\r\nexport const Crossword = React.forwardRef<Handle, Props>(({ crosswordIndex, onMoved, onChange, guess }, ref) => {\r\n  const crosswordData = crosswords[crosswordIndex];\r\n  const { initialClue: initialWord, initialDirection } = useMemo(() => getInitialClue(crosswordData), [crosswordData]);\r\n  const dispatch = useDispatch();\r\n  const darkMode = useSelector((state: RootState) => state.settings.darkMode);\r\n  const [gridData, setGridData] = useGridData(crosswordIndex);\r\n  const [focusedCell, setFocusedCell, focusedCellRef] = useRefState<UsedCellData>(gridData[initialWord.row][initialWord.col] as UsedCellData);\r\n  const [focusedDirection, setFocusedDirection, focusedDirectionRef] = useRefState<Direction>(initialDirection);\r\n\r\n  const svgSize = 240;\r\n  const margin = 20;\r\n  const crosswordSize = svgSize - 2 * margin;\r\n  const squareSize = crosswordSize / gridData.length;\r\n  const borderSize = 0.125;\r\n  const numberOffset = 0.5;\r\n\r\n  const selectCell = useCallback((cell: UsedCellData, targetDirection: Direction) => {\r\n    const actualDirection = cell[targetDirection] ? targetDirection : otherDirection(targetDirection);\r\n\r\n    setFocusedDirection(actualDirection);\r\n    setFocusedCell(cell)\r\n  }, [setFocusedCell, setFocusedDirection]);\r\n\r\n  const isCellSelected = useCallback((cell: CellData) => cell.used && cell.row === focusedCell.row && cell.col === focusedCell.col, [focusedCell]);\r\n  const getCell = useCallback((row: number, col: number) => get(gridData, `${row}.${col}`, { used: false }) as CellData, [gridData]);\r\n\r\n  const onClick = useCallback((cell: CellData) => {\r\n    if (!cell.used) return;\r\n\r\n    const targetDirection = isCellSelected(cell) ? otherDirection(focusedDirection) : focusedDirection;\r\n    selectCell(cell, targetDirection);\r\n  }, [focusedDirection, selectCell, isCellSelected]);\r\n\r\n  const moveRelative = useCallback((x: number, y: number) => {\r\n    const oldCell = focusedCellRef.current;\r\n    const newCell = getCell(oldCell.row + y, oldCell.col + x);\r\n    const targetDirection = x !== 0 ? 'across' : 'down';\r\n    const cellToSelect = targetDirection === focusedDirection ? newCell : oldCell;\r\n\r\n    selectCell(cellToSelect.used ? cellToSelect : oldCell, targetDirection);\r\n  }, [focusedCellRef, getCell, selectCell, focusedDirection]);\r\n\r\n  const switchDirections = useCallback(() => {\r\n    const targetDirection = otherDirection(focusedDirectionRef.current);\r\n    const targetCell = focusedCellRef.current;\r\n\r\n    selectCell(targetCell, targetDirection);\r\n  }, [focusedCellRef, focusedDirectionRef, selectCell]);\r\n\r\n  useEffect(() => {\r\n    const listener = (e: KeyboardEvent) => {\r\n      if (e.code === 'ArrowLeft') {\r\n        moveRelative(-1, 0);\r\n      } else if (e.code === 'ArrowRight') {\r\n        moveRelative(1, 0);\r\n      } else if (e.code === 'ArrowDown') {\r\n        moveRelative(0, 1);\r\n      } else if (e.code === 'ArrowUp') {\r\n        moveRelative(0, -1);\r\n      } else if (e.code === 'Tab') {\r\n        switchDirections();\r\n      }\r\n    }\r\n    window.addEventListener('keyup', listener)\r\n    return () => {\r\n      window.removeEventListener('keyup', listener)\r\n    }\r\n  }, [moveRelative, switchDirections]);\r\n\r\n  const updateShadowLetters = useCallback(() => {\r\n    const number = focusedCell[focusedDirection] as string;\r\n    const focusedClue = crosswordData[focusedDirection][number] as WordInput;\r\n\r\n    if (!number || !focusedClue) return [];\r\n\r\n    const knownLetters : (string | undefined)[] = [];\r\n    const penciledLetters : (string | undefined)[] = [];\r\n\r\n    Array.from(focusedClue.answer).forEach((_, index) => {\r\n      let letterRow = focusedClue.row + (focusedDirection === 'across' ? 0 : index);\r\n      let letterCol = focusedClue.col + (focusedDirection === 'across' ? index : 0);\r\n      const cell = gridData[letterRow][letterCol];\r\n      if (!cell.used) return undefined;\r\n\r\n      knownLetters.push(cell.guess);\r\n      penciledLetters.push(cell.pencil);\r\n    });\r\n\r\n    dispatch(setKnownLetters(knownLetters));\r\n    dispatch(setPenciledLetters(penciledLetters));\r\n  }, [focusedCell, focusedDirection, gridData, dispatch, crosswordData])\r\n\r\n  useEffect(() => {\r\n    if (onMoved) onMoved(focusedCell, focusedDirection);\r\n    updateShadowLetters();\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [focusedCell, focusedDirection, updateShadowLetters]);\r\n\r\n  useEffect(() => {\r\n    if (onChange) onChange(gridData);\r\n    updateShadowLetters();\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [gridData, updateShadowLetters]);\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    guessWord: (guess: string) => {\r\n      const focusedNumber = focusedCell[focusedDirection];\r\n\r\n      if (!focusedNumber) return;\r\n      const focusedWord = crosswordData[focusedDirection][focusedNumber];\r\n\r\n      const gridDataClone = cloneDeep(gridData);\r\n\r\n      let { row, col, answer } = focusedWord;\r\n      Array.from(guess).forEach((letter, index) => {\r\n        const newRow = row + (focusedDirection === 'down' ? index : 0);\r\n        const newCol = col + (focusedDirection === 'across' ? index : 0);\r\n        const cellClone = gridDataClone[newRow][newCol];\r\n        if (!cellClone.used) return;\r\n        if (letter === answer[index]) cellClone.guess = letter;\r\n      });\r\n\r\n      setGridData(gridDataClone);\r\n    },\r\n    pencilLetter: (letter: string) => {\r\n      const gridDataClone = cloneDeep(gridData);\r\n      let { row, col } = focusedCell;\r\n      gridDataClone[row][col].pencil = letter;\r\n      setGridData(gridDataClone);\r\n    },\r\n    eraseLetter: () => {\r\n      const gridDataClone = cloneDeep(gridData);\r\n      let { row, col } = focusedCell;\r\n      delete gridDataClone[row][col].pencil;\r\n      setGridData(gridDataClone);\r\n    },\r\n    reset: () => {\r\n      setGridData(createGridData(crosswordData));\r\n    },\r\n    reveal: () => {\r\n      const gridDataClone = cloneDeep(gridData);\r\n      gridData.forEach((cells, row) => {\r\n        cells.forEach((_, col) => {\r\n          const cellClone = gridDataClone[row][col];\r\n          if (!cellClone.used) return;\r\n\r\n          cellClone.guess = cellClone.answer;\r\n        });\r\n      });\r\n      setGridData(gridDataClone);\r\n    },\r\n    moveTo: (row, col) => {\r\n      const cell = getCell(row, col);\r\n\r\n      if (!cell.used) return;\r\n      selectCell(cell, focusedDirection);\r\n    },\r\n  }));\r\n\r\n  const getGuessedLetter = (cell: CellData) => {\r\n    if (!cell.used || !guess) return;\r\n\r\n    const focusedNumber = focusedCell[focusedDirection];\r\n\r\n    if (!focusedNumber || cell[focusedDirection] !== focusedNumber) return;\r\n    const focusedWord = crosswordData[focusedDirection][focusedNumber];\r\n    const letterIndex = cell.row - focusedWord.row || cell.col - focusedWord.col;\r\n    return guess[letterIndex];\r\n  };\r\n\r\n  const numberColor = darkMode ? 'white' : 'rgba(0, 0, 0, 0.25)';\r\n  const textColor = darkMode ? 'white' : 'black';\r\n  const guessTextColor = darkMode ? '#f1c40f' : 'rgba(0, 0, 255, 0.6)';\r\n  const pencilColor = darkMode ? 'rgba(170, 170, 170)' : 'rgba(107, 114, 128, 0.5)';\r\n  const selectedCellColor = darkMode ? 'rgb(66, 99, 148)' : '#ffda00';\r\n  const selectedWordColor = darkMode ? 'rgb(54, 45, 103)' : '#a7d8ff';\r\n\r\n  return (\r\n    <svg viewBox={`0 0 ${svgSize} ${svgSize}`} width='100%' height='100%'>\r\n      <rect x={margin} y={margin} width={crosswordSize} height={crosswordSize} fill=\"black\" />\r\n      {gridData.flat().map((cell: CellData) => {\r\n        if (!cell.used) return null;\r\n        const key = `${cell.row}_${cell.col}`;\r\n\r\n        let color = darkMode ? 'rgb(87, 88, 96)' : 'white';\r\n        if (isCellSelected(cell)) {\r\n          color = selectedCellColor;\r\n        } else if (cell[focusedDirection] === focusedCell[focusedDirection]) {\r\n          color = selectedWordColor;\r\n        }\r\n\r\n        const guessedLetter = getGuessedLetter(cell);\r\n        let textFill = textColor;\r\n        if (guessedLetter) textFill = guessTextColor;\r\n        if (!guessedLetter && !cell.guess && cell.pencil) textFill = pencilColor;\r\n        const letter = guessedLetter || cell.guess || cell.pencil;\r\n\r\n        return (\r\n          <g key={key} onClick={() => onClick(cell)}>\r\n            <rect\r\n              x={cell.col * squareSize + borderSize + margin}\r\n              y={cell.row * squareSize + borderSize + margin}\r\n              width={squareSize - 2 * borderSize}\r\n              height={squareSize - 2 * borderSize}\r\n              fill={color}\r\n              stroke='black'\r\n              strokeWidth={0.4}\r\n            />\r\n            {cell.number && (\r\n              <text\r\n                x={cell.col * squareSize + numberOffset + margin}\r\n                y={cell.row * squareSize + numberOffset + margin}\r\n                textAnchor=\"start\"\r\n                dominantBaseline=\"hanging\"\r\n                style={{ fontSize: '25%', fill: numberColor, userSelect: 'none' }}\r\n              >{cell.number}</text>\r\n            )}\r\n            {letter && (\r\n              <text\r\n                x={(cell.col + 0.5) * squareSize + margin}\r\n                y={(cell.row + 0.5) * squareSize + margin + 3}\r\n                textAnchor=\"middle\"\r\n                dominantBaseline=\"middle\"\r\n                style={{ fill: textFill, userSelect: 'none', fontSize: '10px' }}\r\n              >{letter}</text>\r\n            )}\r\n            {cell.circle && (\r\n              <circle\r\n                cx={(cell.col + 0.5) * squareSize + margin}\r\n                cy={(cell.row + 0.5) * squareSize + margin}\r\n                r={squareSize / 2 - 1}\r\n                fill='transparent'\r\n                stroke={darkMode ? 'rgba(255,255,255,0.8)' : 'rgba(0,0,0,0.5)'}\r\n                strokeWidth={0.5}\r\n              />\r\n            )}\r\n          </g>\r\n        );\r\n      })}\r\n    </svg>\r\n  )\r\n});\r\n","import {\r\n  QuestionMarkCircleIcon,\r\n  PresentationChartBarIcon,\r\n  CogIcon,\r\n  PencilIcon,\r\n  ArchiveIcon,\r\n  MenuIcon,\r\n} from '@heroicons/react/outline'\r\nimport {\r\n  ElementRef,\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from 'react'\r\nimport { toast } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\nimport { Grid } from './grid/Grid'\r\nimport { Keyboard } from './keyboard/Keyboard'\r\n// import { HelpModal } from './modals/HelpModal'\r\n// import { ShareModal } from './modals/ShareModal'\r\nimport { useLazyLoadedValidWords } from '../lib/words'\r\nimport '../App.scss'\r\nimport { formatTime, getInitialClue, getTotalGuesses } from '../lib/utils'\r\nimport { CellColors } from './mini-crossword/MiniCrossword'\r\nimport {\r\n  WORDLE_CORRECT_COLOR,\r\n  WORDLE_LOSE_COLOR,\r\n  WORDLE_MISPLACED_COLOR,\r\n  WORDLE_WRONG_COLOR,\r\n} from '../constants/colors'\r\nimport { Crossword } from './crossword/Crossword'\r\nimport {\r\n  CellData,\r\n  Direction,\r\n  GridData,\r\n  UsedCellData,\r\n  WordInput,\r\n} from '../types'\r\nimport { useGameState } from '../redux/hooks/useGameState'\r\nimport { otherDirection } from '../lib/crossword-utils'\r\n// import { SettingsModal } from './modals/SettingsModal'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { RootState } from '../redux/store'\r\nimport { setPencilMode } from '../redux/slices/settingsSlice'\r\nimport { markFirstRender, setOpenModal } from '../redux/slices/navigationSlice'\r\nimport crosswords from '../constants/crosswords'\r\nimport { crosswordIndex as defaultIndex } from '../lib/utils'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport NotFound from './NotFound'\r\nimport { incrementTimer, startTimer } from '../redux/slices/wordleSlice'\r\nimport { useInterval } from '../lib/useInterval'\r\nimport cn from 'classnames'\r\nimport { useWindowListener } from '../lib/useWindowListener'\r\nimport { Modal } from './modals/Modal'\r\n\r\ntype crosswordleParams = {\r\n  crosswordNumber?: string\r\n}\r\n\r\nconst Crosswordle: React.FC = () => {\r\n  const navigate = useNavigate()\r\n  const firstRender = useSelector(\r\n    (state: RootState) => state.navigation.firstRender\r\n  )\r\n  const { crosswordNumber } = useParams<crosswordleParams>()\r\n  const crosswordIndex = crosswordNumber\r\n    ? Number(crosswordNumber) - 1\r\n    : defaultIndex\r\n  const crosswordData = crosswords[crosswordIndex]\r\n  const { initialClue, initialDirection } = useMemo(\r\n    () => getInitialClue(crosswordData),\r\n    [crosswordData]\r\n  )\r\n  const crosswordRef = useRef<ElementRef<typeof Crossword>>(null)\r\n  const {\r\n    isGameWon,\r\n    lostCell,\r\n    guesses,\r\n    shareHistory,\r\n    addGuess: addGuessToState,\r\n    pushShareHistory,\r\n    win,\r\n    lose,\r\n    time,\r\n  } = useGameState(crosswordIndex)\r\n  const [currentGuess, setCurrentGuess] = useState('')\r\n  const [currentWord, setCurrentWord] = useState(initialClue.answer)\r\n  const [crossedWord, setCrossedWord] = useState<string | undefined>()\r\n  const [focusedWordData, setFocusedWordData] = useState<WordInput>(initialClue)\r\n  const [focusedDirection, setFocusedDirection] =\r\n    useState<Direction>(initialDirection)\r\n  const [focusedNumber, setFocusedNumber] = useState<string>('1')\r\n  const [crossedNumber, setCrossedNumber] = useState<string | undefined>(\r\n    undefined\r\n  )\r\n  const [focusedIndex, setFocusedIndex] = useState(0)\r\n  const [crossedFocusedIndex, setCrossedFocusedIndex] = useState<\r\n    number | undefined\r\n  >(undefined)\r\n  const [validWords, loadValidWords] = useLazyLoadedValidWords()\r\n  const [showMenu, setShowMenu] = useState<boolean>(false)\r\n  const dispatch = useDispatch()\r\n  const { darkMode, pencilMode, showTimer } = useSelector(\r\n    (state: RootState) => state.settings\r\n  )\r\n\r\n  // Open share modal if they have already finished this game\r\n  useEffect(() => {\r\n    if (isGameWon || lostCell) dispatch(setOpenModal('share'))\r\n  }, [isGameWon, lostCell, dispatch, firstRender])\r\n\r\n  useEffect(() => {\r\n    dispatch(markFirstRender())\r\n  }, [dispatch, firstRender])\r\n\r\n  useEffect(() => {\r\n    if (darkMode) {\r\n      document.documentElement.classList.add('dark')\r\n    } else {\r\n      document.documentElement.classList.remove('dark')\r\n    }\r\n  }, [darkMode])\r\n\r\n  useEffect(() => {\r\n    loadValidWords()\r\n  }, [loadValidWords])\r\n\r\n  // After keyboard input move to the next square where you can type\r\n  const moveToIndex = useCallback(\r\n    (index: number) => {\r\n      let { row, col } = focusedWordData\r\n      if (focusedDirection === 'across') col += index\r\n      if (focusedDirection === 'down') row += index\r\n      crosswordRef.current?.moveTo(row, col)\r\n    },\r\n    [focusedDirection, crosswordRef, focusedWordData]\r\n  )\r\n\r\n  // Key event callbacks\r\n  const onChar = (value: string) => {\r\n    if (pencilMode) {\r\n      crosswordRef.current?.pencilLetter(value)\r\n      moveToIndex(focusedIndex + 1)\r\n      return\r\n    }\r\n\r\n    const guessesForWord = guesses[focusedDirection][focusedNumber]\r\n\r\n    if (currentGuess.length < currentWord.length && guessesForWord.length < 6) {\r\n      const newGuess = `${currentGuess}${value}`\r\n      setCurrentGuess(newGuess)\r\n      moveToIndex(newGuess.length)\r\n    }\r\n  }\r\n\r\n  const onDelete = () => {\r\n    if (pencilMode) {\r\n      crosswordRef.current?.eraseLetter()\r\n      moveToIndex(focusedIndex - 1)\r\n      return\r\n    }\r\n\r\n    const newGuess = currentGuess.slice(0, -1)\r\n    setCurrentGuess(newGuess)\r\n    moveToIndex(newGuess.length)\r\n  }\r\n\r\n  // Callbacks to keep move history in sync with guesses\r\n  const updateShareHistory = useCallback(\r\n    (guess: string) => {\r\n      const { row, col, answer } = focusedWordData\r\n      const previousCellColors = shareHistory.slice(-1)[0] || {}\r\n      const newCellColors = Object.keys(previousCellColors).reduce(\r\n        (cellColors, key) => {\r\n          if (previousCellColors[key] === WORDLE_CORRECT_COLOR)\r\n            cellColors[key] = previousCellColors[key]\r\n          return cellColors\r\n        },\r\n        {} as CellColors\r\n      )\r\n\r\n      guess.split('').forEach((letter, index) => {\r\n        const newRow = row + (focusedDirection === 'across' ? 0 : index)\r\n        const newCol = col + (focusedDirection === 'across' ? index : 0)\r\n\r\n        if (newCellColors[`${newRow}_${newCol}`] === WORDLE_CORRECT_COLOR)\r\n          return\r\n\r\n        if (letter === answer[index]) {\r\n          newCellColors[`${newRow}_${newCol}`] = WORDLE_CORRECT_COLOR\r\n        } else if (answer.includes(letter)) {\r\n          newCellColors[`${newRow}_${newCol}`] = WORDLE_MISPLACED_COLOR\r\n        } else {\r\n          newCellColors[`${newRow}_${newCol}`] = WORDLE_WRONG_COLOR\r\n        }\r\n      })\r\n\r\n      pushShareHistory(newCellColors)\r\n    },\r\n    [shareHistory, pushShareHistory, focusedWordData, focusedDirection]\r\n  )\r\n\r\n  const updateShareHistoryWithLoss = useCallback(\r\n    (cell: UsedCellData) => {\r\n      const previousCellColors = shareHistory.slice(-1)[0] || {}\r\n      const key = `${cell.row}_${cell.col}`\r\n\r\n      pushShareHistory({ ...previousCellColors, [key]: WORDLE_LOSE_COLOR })\r\n    },\r\n    [shareHistory, pushShareHistory]\r\n  )\r\n\r\n  const addGuess = (guess: string) => {\r\n    if (shareHistory.length === 0)\r\n      dispatch(startTimer({ index: crosswordIndex }))\r\n    addGuessToState(focusedDirection, focusedNumber, guess)\r\n\r\n    crosswordRef.current?.guessWord(currentGuess)\r\n\r\n    updateShareHistory(guess)\r\n  }\r\n\r\n  // Check for game win or game loss\r\n  const isCellLost = useCallback(\r\n    (cell: UsedCellData) => {\r\n      if (cell.guess === cell.answer) return false\r\n\r\n      if (cell.across && cell.down) {\r\n        return (\r\n          guesses.across[cell.across].length >= 6 &&\r\n          guesses.down[cell.down].length >= 6\r\n        )\r\n      } else if (cell.across) {\r\n        return guesses.across[cell.across].length >= 6\r\n      } else if (cell.down) {\r\n        return guesses.down[cell.down].length >= 6\r\n      }\r\n\r\n      return false\r\n    },\r\n    [guesses]\r\n  )\r\n\r\n  const checkWinOrLoss = (gridData: GridData) => {\r\n    if (isGameWon || lostCell) return\r\n\r\n    let gameLost = false\r\n    let crosswordCorrect = true\r\n\r\n    gridData.forEach((row) => {\r\n      return row.forEach((cell) => {\r\n        if (!cell.used) return\r\n        if (isCellLost(cell)) {\r\n          gameLost = true\r\n          lose(cell)\r\n          updateShareHistoryWithLoss(cell)\r\n        }\r\n        if (crosswordCorrect) crosswordCorrect = cell.guess === cell.answer\r\n      })\r\n    })\r\n\r\n    const totalGuesses = getTotalGuesses(guesses)\r\n\r\n    if (gameLost) {\r\n      crosswordRef?.current?.reveal()\r\n    }\r\n\r\n    if (crosswordCorrect) {\r\n      win()\r\n    }\r\n  }\r\n\r\n  const onEnter = async () => {\r\n    if (currentGuess.length !== currentWord.length) return\r\n    const allowedWords = validWords || (await loadValidWords())\r\n\r\n    const wordAllowed = allowedWords.includes(currentGuess.toLowerCase())\r\n\r\n    // Alert user if guess is not a word\r\n    if (!wordAllowed && currentGuess !== currentWord) {\r\n      toast.error('Word not found')\r\n      return\r\n    }\r\n\r\n    const guessesForWord = guesses[focusedDirection][focusedNumber]\r\n\r\n    if (\r\n      currentGuess.length === currentWord.length &&\r\n      guessesForWord.length < 6 &&\r\n      !guessesForWord.includes(currentGuess)\r\n    ) {\r\n      addGuess(currentGuess)\r\n      setCurrentGuess('')\r\n    }\r\n  }\r\n\r\n  const onGridDataChange = (gridData: GridData) => {\r\n    checkWinOrLoss(gridData)\r\n  }\r\n\r\n  const onMoved = (cell: CellData, direction: Direction) => {\r\n    if (!cell.used) return\r\n\r\n    const number = cell[direction] || ''\r\n    const otherNumber = cell[otherDirection(direction)]\r\n    const wordData = crosswordData[direction][number]\r\n    const crossedWordData = otherNumber\r\n      ? crosswordData[otherDirection(direction)][otherNumber]\r\n      : undefined\r\n    setCurrentWord(wordData.answer)\r\n    setCrossedWord(crossedWordData?.answer)\r\n    setFocusedWordData(wordData)\r\n    setFocusedNumber(number)\r\n    setCrossedNumber(otherNumber)\r\n    setFocusedDirection(direction)\r\n    setFocusedIndex(cell.row - wordData.row || cell.col - wordData.col)\r\n    setCrossedFocusedIndex(\r\n      crossedWordData\r\n        ? cell.row - crossedWordData.row || cell.col - crossedWordData.col\r\n        : undefined\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    setCurrentGuess('')\r\n  }, [focusedDirection, focusedNumber])\r\n\r\n  const togglePencilMode = () => {\r\n    const enabled = !pencilMode\r\n    dispatch(setPencilMode(enabled))\r\n    setCurrentGuess('')\r\n  }\r\n\r\n  useInterval(() => {\r\n    if (time !== undefined && !isGameWon && !lostCell) {\r\n      dispatch(incrementTimer({ index: crosswordIndex }))\r\n    }\r\n  }, 1000)\r\n\r\n  useEffect(() => {\r\n    // Correction toast specifically for crosswordle 104\r\n    if (crosswordIndex === 103) dispatch(setOpenModal('notice'))\r\n  }, [crosswordIndex, dispatch])\r\n\r\n  // Prevent user from accessing puzzles that haven't yet been released\r\n  if (defaultIndex < crosswordIndex) return <NotFound />\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen\">\r\n      <div className=\"flex w-screen mx-auto items-center border-b-slate-400 border-b-[1px] p-3 md:p-4\">\r\n        <div className=\"grow\">\r\n          <h1 className=\"text-md md:text-xl font-bold whitespace-nowrap dark:text-white\">\r\n            WordleWord\r\n          </h1>\r\n\r\n        </div>\r\n        <ArchiveIcon\r\n          className=\"h-6 w-6 mr-3 cursor-pointer dark:stroke-white hidden md:inline\"\r\n          onClick={() => navigate('/puzzles')}\r\n        />\r\n        <div className={cn('menu md:hidden', { hidden: !showMenu })}>\r\n          <div\r\n            className=\"mb-2 mx-2 cursor-pointer flex items-center\"\r\n            onClick={() => {\r\n              dispatch(setOpenModal('share'))\r\n              setShowMenu(false)\r\n            }}\r\n          >\r\n            <PresentationChartBarIcon className=\"h-4 w-4 mr-2\" />\r\n            Share\r\n          </div>\r\n          <div\r\n            className=\"mb-2 mx-2 cursor-pointer flex items-center\"\r\n            onClick={() => {\r\n              navigate('/puzzles')\r\n              setShowMenu(false)\r\n            }}\r\n          >\r\n            <ArchiveIcon className=\"h-4 w-4 mr-2\" />\r\n            Puzzle Archive\r\n          </div>\r\n          <div\r\n            className=\"mb-2 mx-2 cursor-pointer flex items-center\"\r\n            onClick={() => {\r\n              dispatch(setOpenModal('help'))\r\n              setShowMenu(false)\r\n            }}\r\n          >\r\n            <QuestionMarkCircleIcon className=\"h-4 w-4 mr-2\" />\r\n            How to Play\r\n          </div>\r\n          <div\r\n            className=\"mb-2 mx-2 cursor-pointer flex items-center\"\r\n            onClick={() => {\r\n              dispatch(setOpenModal('settings'))\r\n              setShowMenu(false)\r\n            }}\r\n          >\r\n            <CogIcon className=\"h-4 w-4 mr-2\" />\r\n            Settings\r\n          </div>\r\n        </div>\r\n        {/* <ShareModal crosswordIndex={crosswordIndex} /> */}\r\n        {/* <HelpModal />\r\n        <HelpModal onlyKeyboard={true} /> */}\r\n        {/* <SettingsModal /> */}\r\n        <Modal name=\"notice\" title=\"Updates to today's puzzle\">\r\n          <p className=\"text-gray-400\">\r\n            Today's puzzle originally had a typo \"ONIOM\" instead of \"ONION\". If\r\n            you had previously started this puzzle I have reset it, if you still\r\n            see the word \"ONIOM\" in the puzzle try refreshing the page. If you\r\n            previously lost this puzzle I reset your streak so you won't lose\r\n            your streak. Sorry for the typo!\r\n          </p>\r\n        </Modal>\r\n      </div>\r\n      <div className=\"flex flex-1 flex-col w-screen overflow-x-hidden md:flex-row lg:flex-row\">\r\n        <div className=\"w-full flex md:items-center justify-center px-20 md:p-6 md:w-1/2\">\r\n          <div className=\"max-w-[300px] md:max-w-[500px] w-full h-full justify-center max-width-static-mobile\">\r\n            <Crossword\r\n              crosswordIndex={crosswordIndex}\r\n              onMoved={onMoved}\r\n              onChange={onGridDataChange}\r\n              ref={crosswordRef}\r\n              guess={currentGuess}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"w-full flex flex-1 md:items-center md:w-1/2 md:border-l border-slate-400\">\r\n          <div className=\"md:py-8 max-w-7xl mx-auto sm:px-6 lg:px-8 keyboard\">\r\n            <Grid\r\n              guesses={guesses[focusedDirection][focusedNumber] || []}\r\n              currentGuess={currentGuess}\r\n              solution={currentWord}\r\n              focusedIndex={focusedIndex}\r\n            />\r\n            <Keyboard\r\n              onChar={onChar}\r\n              onDelete={onDelete}\r\n              onEnter={onEnter}\r\n              solution={currentWord}\r\n              crossedSolution={crossedWord}\r\n              guesses={guesses[focusedDirection][focusedNumber] || []}\r\n              crossedGuesses={\r\n                guesses[otherDirection(focusedDirection)][crossedNumber || 0] ||\r\n                []\r\n              }\r\n              index={focusedIndex}\r\n              crossedIndex={crossedFocusedIndex}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Crosswordle\r\n","import { useCallback } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Direction, UsedCellData } from \"../../types\"\r\nimport { RootState } from \"../store\"\r\nimport { addGuess as addGuessAction, pushShareHistory as pushShareHistoryAction, setGameWon, generateInitialGuessState, setLostCell } from \"../slices/wordleSlice\";\r\nimport { CellColors } from \"../../components/mini-crossword/MiniCrossword\";\r\nimport crosswords from \"../../constants/crosswords\";\r\n\r\nexport const useGameState = (index: number) => {\r\n  const guesses = useSelector((state: RootState) => state.wordle.guesses[index] || generateInitialGuessState(crosswords[index]));\r\n  const shareHistory = useSelector((state: RootState) => state.wordle.shareHistories[index] || []);\r\n  const isGameWon = useSelector((state: RootState) => state.wordle.gameWins[index] || false);\r\n  const lostCell = useSelector((state: RootState) => state.wordle.lostCells[index] as UsedCellData | undefined);\r\n  const time = useSelector((state: RootState) => state.wordle.times[index] as number | undefined);\r\n  const dispatch = useDispatch();\r\n\r\n  const addGuess = useCallback((direction: Direction, number: string, guess: string) => {\r\n    dispatch(addGuessAction({ index, direction, number, guess }));\r\n  }, [dispatch, index]);\r\n\r\n  const pushShareHistory = useCallback((cellColors: CellColors) => {\r\n    dispatch(pushShareHistoryAction({ index, cellColors }));\r\n  }, [dispatch, index]);\r\n\r\n  const win = useCallback(() => {\r\n    dispatch(setGameWon({ index }));\r\n  }, [dispatch, index]);\r\n\r\n  const lose = useCallback((lostCell: UsedCellData) => {\r\n    dispatch(setLostCell({ index, lostCell }));\r\n  }, [dispatch, index]);\r\n\r\n  return { guesses, addGuess, shareHistory, pushShareHistory, isGameWon, win, lostCell, lose, time };\r\n}\r\n","import { useCallback, useState } from \"react\";\r\n\r\nexport const useLazyLoadedValidWords = () => {\r\n  const [validWords, setValidWords] = useState<string[] | null>(null);\r\n\r\n  const loadWords = useCallback(async () => {\r\n    const response = await fetch(process.env.PUBLIC_URL + '/validWords.json');\r\n    const words = await response.json();\r\n\r\n    setValidWords(words);\r\n    return words;\r\n  }, []);\r\n\r\n  return [validWords, loadWords] as const;\r\n}\r\n","import { useEffect, useRef } from 'react';\r\n\r\nexport function useInterval(callback: Function, delay: number) {\r\n  const savedCallback = useRef<Function>();\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    let id = setInterval(() => {\r\n      if (savedCallback.current) savedCallback.current();\r\n    }, delay);\r\n    return () => clearInterval(id);\r\n  }, [delay]);\r\n}\r\n","import { Fragment, ReactNode } from 'react'\r\nimport { Dialog, Transition } from '@headlessui/react'\r\nimport { XCircleIcon } from '@heroicons/react/outline'\r\nimport { RootState } from '../../redux/store'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setOpenModal } from '../../redux/slices/navigationSlice'\r\n\r\ntype Props = {\r\n  name: RootState['navigation']['openModal'];\r\n  title: string;\r\n  titleIcon?: ReactNode;\r\n  returnTo?: RootState['navigation']['openModal'];\r\n}\r\n\r\nexport const Modal : React.FC<Props> = ({ name, title, titleIcon, returnTo, children }) => {\r\n  const dispatch = useDispatch();\r\n  const isOpen = useSelector((state: RootState) => state.navigation.openModal === name);\r\n\r\n  return (\r\n    <Transition.Root show={isOpen} as={Fragment}>\r\n      <Dialog\r\n        as=\"div\"\r\n        className=\"fixed z-10 inset-0 overflow-y-auto\"\r\n        onClose={() => dispatch(setOpenModal(returnTo))}\r\n      >\r\n        <div className=\"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n          <Transition.Child\r\n            as={Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <Dialog.Overlay className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" />\r\n          </Transition.Child>\r\n\r\n          {/* This element is to trick the browser into centering the modal contents. */}\r\n          <span\r\n            className=\"hidden sm:inline-block sm:align-middle sm:h-screen\"\r\n            aria-hidden=\"true\"\r\n          >\r\n            &#8203;\r\n          </span>\r\n          <Transition.Child\r\n            as={Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\r\n            enterTo=\"opacity-100 translate-y-0 sm:scale-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\r\n            leaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\r\n          >\r\n            <div className=\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all md:max-w-lg sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6\">\r\n              <div className=\"absolute right-4 top-4\">\r\n                <XCircleIcon\r\n                  className=\"h-6 w-6 cursor-pointer\"\r\n                  onClick={() => dispatch(setOpenModal(returnTo))}\r\n                />\r\n              </div>\r\n              <div>\r\n                <div className=\"text-center\">\r\n                  <div className='mb-2'>{titleIcon}</div>\r\n                  <Dialog.Title\r\n                    as=\"h3\"\r\n                    className=\"text-lg leading-6 font-medium text-gray-900\"\r\n                  >\r\n                    {title}\r\n                  </Dialog.Title>\r\n                  <div className=\"mt-2\">\r\n                    {children}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Transition.Child>\r\n        </div>\r\n      </Dialog>\r\n    </Transition.Root>\r\n  )\r\n}\r\n","import type {\r\n  CrosswordInput,\r\n  Direction,\r\n  GridData,\r\n  UsedCellData,\r\n} from '../types';\r\n\r\ntype RowOrCol = 'row' | 'col';\r\n  \r\nconst directionInfo: Record<\r\n  Direction,\r\n  { primary: RowOrCol; orthogonal: RowOrCol }\r\n> = {\r\n  across: {\r\n    primary: 'col',\r\n    orthogonal: 'row',\r\n  },\r\n  down: {\r\n    primary: 'row',\r\n    orthogonal: 'col',\r\n  },\r\n};\r\n\r\n// Get direction\r\nexport const bothDirections = Object.keys(directionInfo) as Direction[];\r\n\r\nexport function isAcross(direction: Direction) {\r\n  return direction === 'across';\r\n}\r\n\r\nexport function otherDirection(direction: Direction) {\r\n  return isAcross(direction) ? 'down' : 'across';\r\n}\r\n\r\nexport function calculateExtents(data: CrosswordInput, direction: Direction) {\r\n  const dir = directionInfo[direction];\r\n  let primaryMax = 0;\r\n  let orthogonalMax = 0;\r\n\r\n  Object.entries(data[direction]).forEach(([, info]) => {\r\n    const primary = info[dir.primary] + info.answer.length - 1;\r\n    if (primary > primaryMax) {\r\n      primaryMax = primary;\r\n    }\r\n\r\n    const orthogonal = info[dir.orthogonal];\r\n    if (orthogonal > orthogonalMax) {\r\n      orthogonalMax = orthogonal;\r\n    }\r\n  });\r\n\r\n  return {\r\n    [dir.primary]: primaryMax,\r\n    [dir.orthogonal]: orthogonalMax,\r\n  };\r\n}\r\n\r\nexport function createEmptyGrid(size: number) {\r\n  const gridData: GridData = Array(size);\r\n\r\n  for (let r = 0; r < size; r++) {\r\n    gridData[r] = Array(size);\r\n    for (let c = 0; c < size; c++) {\r\n      gridData[r][c] = {\r\n        row: r,\r\n        col: c,\r\n        used: false,\r\n      };\r\n    }\r\n  }\r\n\r\n  return gridData;\r\n}\r\n\r\n// Given the \"nice format\" for a crossword, generate the usable data optimized\r\n// for rendering and our interactivity.\r\nexport function createGridData(data: CrosswordInput) {\r\n  const acrossMax = calculateExtents(data, 'across');\r\n  const downMax = calculateExtents(data, 'down');\r\n\r\n  const size =\r\n    Math.max(...Object.values(acrossMax), ...Object.values(downMax)) + 1;\r\n\r\n  const gridData = createEmptyGrid(size);\r\n\r\n  bothDirections.forEach((direction) => {\r\n    Object.entries(data[direction]).forEach(([number, info]) => {\r\n      const { row: rowStart, col: colStart, answer } = info;\r\n      for (let i = 0; i < answer.length; i++) {\r\n        const row = rowStart + (direction === 'down' ? i : 0);\r\n        const col = colStart + (direction === 'across' ? i : 0);\r\n        const cellData = gridData[row][col] as UsedCellData;\r\n  \r\n        cellData.used = true;\r\n        cellData.answer = answer[i];\r\n        cellData[direction] = number;\r\n  \r\n        if (i === 0) cellData.number = number;\r\n      }\r\n    });\r\n  });\r\n\r\n  if (data.circles) {\r\n    data.circles.forEach(([row, col]) => {\r\n      const cellData = gridData[row][col];\r\n      if (!cellData.used) return;\r\n\r\n      cellData.circle = true;\r\n    });\r\n  }\r\n\r\n  return gridData;\r\n}\r\n","import queryString from 'query-string';\r\nimport crosswords from \"../constants/crosswords\";\r\nimport padStart from 'lodash/padStart';\r\nimport { CrosswordInput, Direction, GridData, WordInput } from '../types';\r\nimport { Guesses } from '../redux/slices/wordleSlice';\r\nimport get from 'lodash/get';\r\nimport addDays from 'date-fns/addDays';\r\nimport differenceInDays from 'date-fns/differenceInDays';\r\n\r\nexport function notEmpty<TValue>(\r\n  value: TValue | null | undefined,\r\n): value is TValue {\r\n  return value !== null && value !== undefined;\r\n}\r\n\r\nconst puzzleStartDate = new Date('2022-01-20T00:00:00');\r\n\r\nexport function getPuzzleIndexForDate(date: Date) {\r\n  return differenceInDays(date, puzzleStartDate);\r\n}\r\n\r\nexport function dateFromPuzzleIndex(index: number) {\r\n  return addDays(puzzleStartDate, index);\r\n}\r\n\r\nexport function getTodaysPuzzleIndex() {\r\n  // if (process.env.NODE_ENV === 'development') return crosswords.length - 1;\r\n\r\n  const index = getPuzzleIndexForDate(new Date());\r\n  // Ensure we don't navigate to a puzzle that doesn't exist\r\n  return Math.min(index, crosswords.length - 1);\r\n}\r\n\r\nexport function getPuzzleOfTheDay() {\r\n  let index = getTodaysPuzzleIndex();\r\n  const queryIndex = Number(queryString.parse(window.location.search)?.index as string);\r\n  if (queryIndex >= 0) index = Math.min(index, queryIndex);\r\n\r\n  return {\r\n    crossword: crosswords[index],\r\n    crosswordIndex: index,\r\n  }\r\n};\r\n\r\nexport const { crossword, crosswordIndex } = getPuzzleOfTheDay();\r\nexport const todaysPuzzleIndex = getTodaysPuzzleIndex();\r\n\r\nexport function getInitialClue(crossword: CrosswordInput) {\r\n  let initialClue = get(crossword, 'across.1') as WordInput;\r\n  const initialDirection = initialClue ? 'across' : 'down' as Direction;\r\n  if (!initialClue) initialClue = get(crossword, 'down.1');\r\n  return { initialClue, initialDirection };\r\n}\r\n\r\nexport function sleep(ms: number) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nconst padTime = (time: number) => padStart(time.toString(), 2, '0');\r\n\r\nexport function timeTillTomorrow() {\r\n  const now = new Date();\r\n  const hours = 23 - now.getHours();\r\n  const minutes = 59 - now.getMinutes();\r\n  const seconds = 59 - now.getSeconds();\r\n  return `${padTime(hours)}:${padTime(minutes)}:${padTime(seconds)}`;\r\n};\r\n\r\nexport function getTotalGuesses(guesses: Guesses) {\r\n  const acrossGuesses = Object.values(guesses['across']).flat().length;\r\n  const downGuesses = Object.values(guesses['down']).flat().length;\r\n  return acrossGuesses + downGuesses;\r\n}\r\n\r\nexport function gameProgress(gridData: GridData) {\r\n  let totalCells = 0;\r\n  let completedCells = 0;\r\n\r\n  gridData.forEach((row) => {\r\n    row.forEach((cell) => {\r\n      if (!cell.used) return;\r\n      totalCells += 1;\r\n      if (cell.guess === cell.answer) completedCells += 1;\r\n    });\r\n  });\r\n\r\n  return completedCells / totalCells;\r\n};\r\n\r\nexport function dateString(date: Date) {\r\n  return date.toISOString().split('T')[0]\r\n}\r\n\r\nexport function formatTime(time?: number) {\r\n  if (!time) return '0:00'\r\n  const minutes = Math.floor(time / 60);\r\n  const seconds = time % 60;\r\n  return `${minutes}:${padStart(seconds.toString(), 2, '0')}`;\r\n}\r\n","import { useCallback } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { GridData } from \"../../types\"\r\nimport { RootState } from \"../store\"\r\nimport { setGridData } from \"../slices/crosswordSlice\";\r\nimport { createGridData } from \"../../lib/crossword-utils\";\r\nimport crosswords from \"../../constants/crosswords\";\r\n\r\nexport const useGridData = (index: number) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const updateGridData = useCallback((newGridData: GridData) => {\r\n    dispatch(setGridData({ index, gridData: newGridData }));\r\n  }, [dispatch, index]);\r\n\r\n  const gridData = useSelector((state: RootState) => {\r\n    const data = state.crossword.gridDatas[index];\r\n    if (!data) {\r\n      const initialGridData = createGridData(crosswords[index]);\r\n      updateGridData(initialGridData);\r\n      return initialGridData;\r\n    }\r\n    return data;\r\n  });\r\n\r\n  return [gridData, updateGridData] as const;\r\n}\r\n"],"names":["getStatuses","solution","guesses","knownChars","charObj","forEach","word","split","letter","i","includes","Cell","value","status","mode","size","isFocused","highContrastMode","useSelector","state","settings","classes","classnames","className","CompletedRow","guess","statuses","splitSolution","splitGuess","solutionCharsTaken","map","_","Array","from","length","indexOfPresentChar","findIndex","x","index","getGuessStatuses","CurrentRow","focusedIndex","crossword","knownLetters","penciledLetters","emptyCells","guessLength","getLetter","getMode","EmptyRow","Grid","currentGuess","empties","useWindowHeight","Key","children","crossedStatus","onClick","Keyboard","crossedSolution","onChar","onDelete","onEnter","crossedGuesses","crossedIndex","advancedKeyboard","charStatuses","crossedCharStatus","undefined","action","callback","savedCallback","useRef","useEffect","current","listener","e","window","addEventListener","removeEventListener","useWindowListener","code","key","toUpperCase","width","height","WORDLE_CORRECT_COLOR","useRefState","initial","useState","_setState","stateRef","Crossword","React","ref","crosswordIndex","onMoved","onChange","crosswordData","crosswords","useMemo","getInitialClue","initialWord","initialClue","initialDirection","dispatch","useDispatch","darkMode","useGridData","gridData","setGridData","row","col","focusedCell","setFocusedCell","focusedCellRef","focusedDirection","setFocusedDirection","focusedDirectionRef","margin","squareSize","svgSize","borderSize","selectCell","useCallback","cell","targetDirection","actualDirection","otherDirection","isCellSelected","used","getCell","get","moveRelative","y","oldCell","newCell","cellToSelect","switchDirections","targetCell","updateShadowLetters","number","focusedClue","answer","letterRow","letterCol","push","pencil","setKnownLetters","setPenciledLetters","useImperativeHandle","guessWord","focusedNumber","focusedWord","gridDataClone","cloneDeep","newCol","cellClone","pencilLetter","eraseLetter","reset","createGridData","reveal","cells","moveTo","numberColor","textColor","guessTextColor","pencilColor","selectedCellColor","selectedWordColor","viewBox","fill","flat","color","guessedLetter","letterIndex","getGuessedLetter","textFill","stroke","strokeWidth","textAnchor","dominantBaseline","style","fontSize","userSelect","circle","cx","cy","r","navigate","useNavigate","firstRender","navigation","crosswordNumber","useParams","Number","defaultIndex","crosswordRef","wordle","generateInitialGuessState","shareHistory","shareHistories","isGameWon","gameWins","lostCell","lostCells","time","times","addGuess","direction","addGuessAction","pushShareHistory","cellColors","pushShareHistoryAction","win","setGameWon","lose","setLostCell","useGameState","addGuessToState","setCurrentGuess","currentWord","setCurrentWord","crossedWord","setCrossedWord","focusedWordData","setFocusedWordData","setFocusedNumber","crossedNumber","setCrossedNumber","setFocusedIndex","crossedFocusedIndex","setCrossedFocusedIndex","validWords","setValidWords","fetch","process","response","json","words","useLazyLoadedValidWords","loadValidWords","showMenu","setShowMenu","pencilMode","showTimer","setOpenModal","markFirstRender","document","documentElement","classList","add","remove","moveToIndex","updateShareHistory","previousCellColors","slice","newCellColors","Object","keys","reduce","newRow","updateShareHistoryWithLoss","startTimer","isCellLost","across","down","allowedWords","toLowerCase","toast","guessesForWord","delay","id","setInterval","clearInterval","useInterval","incrementTimer","NotFound","cn","hidden","Modal","name","title","otherNumber","wordData","crossedWordData","gameLost","crosswordCorrect","getTotalGuesses","checkWinOrLoss","newGuess","titleIcon","returnTo","isOpen","openModal","show","as","Fragment","onClose","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","directionInfo","primary","orthogonal","bothDirections","isAcross","calculateExtents","data","dir","primaryMax","orthogonalMax","entries","info","acrossMax","downMax","c","createEmptyGrid","Math","max","values","rowStart","colStart","cellData","circles","puzzleStartDate","Date","dateFromPuzzleIndex","addDays","getTodaysPuzzleIndex","date","differenceInDays","min","queryIndex","queryString","location","search","getPuzzleOfTheDay","updateGridData","newGridData","gridDatas","initialGridData"],"sourceRoot":""}